import{r as u,a as gs,R as ae}from"./react-DnQQq7lD.js";import{D as bs}from"./storage-7oeF2ZJA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();var Ut={exports:{}},gt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=u,vs=Symbol.for("react.element"),xs=Symbol.for("react.fragment"),ws=Object.prototype.hasOwnProperty,ks=ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,js={key:!0,ref:!0,__self:!0,__source:!0};function Ht(s,e,a){var i,o={},r=null,c=null;a!==void 0&&(r=""+a),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(c=e.ref);for(i in e)ws.call(e,i)&&!js.hasOwnProperty(i)&&(o[i]=e[i]);if(s&&s.defaultProps)for(i in e=s.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:vs,type:s,key:r,ref:c,props:o,_owner:ks.current}}gt.Fragment=xs;gt.jsx=Ht;gt.jsxs=Ht;Ut.exports=gt;var t=Ut.exports,Ct={},Pt=gs;Ct.createRoot=Pt.createRoot,Ct.hydrateRoot=Pt.hydrateRoot;class Ss extends bs{topics;learningPaths;tasks;answerHistory;userProgress;practiceSessions;spacedRepetition;constructor(){super("mindforge-academy-test"),this.version(1).stores({topics:"id, title, isActive, createdAt",learningPaths:"id, topicId, difficulty, isActive, createdAt",tasks:"id, learningPathId, type, *metadata.tags, metadata.difficulty, createdAt, hasAudio, language",answerHistory:"id, taskId, sessionId, timestamp, isCorrect",userProgress:"id, topicId, learningPathId, *milestones.lastActivity",practiceSessions:"id, execution.status, execution.startedAt, execution.completedAt, createdAt",spacedRepetition:"id, taskId, schedule.nextReview, algorithm.interval, createdAt"})}}const F=new Ss;async function As(){const s=new Map,e=[],a=[],i={mathematik:["algebra-basics.json","geometry-basics.json","advanced-tasks.json","brueche-grundlagen.json"],biologie:["zellbiologie.json","genetik-basics.json"],spanisch:["spanisch-grundlagen.json","begruessung-vorstellung.json","familie-persoenliches.json","zahlen-farben-tiere.json","vokabeltest-karteikarten.json"],englisch:["unregelmaessige-verben.json"],test:["all-task-types.json"]};for(const[o,r]of Object.entries(i)){if(!s.has(o)){const c=Ns(o);s.set(o,c)}for(const c of r)try{const n=`/learning-platform/test/learning-paths/${o}/${c}`,g=await fetch(n);if(!g.ok){console.warn(`Failed to load ${n}: ${g.status}`);continue}const x=await g.json(),L=x.tasks.map(_=>_.id),E={...x.learningPath,taskIds:L,createdAt:x.learningPath.createdAt?new Date(x.learningPath.createdAt):new Date("2024-01-01"),updatedAt:x.learningPath.createdAt?new Date(x.learningPath.createdAt):new Date("2024-01-01")};e.push(E);const B=s.get(o);B.learningPathIds.includes(E.id)||B.learningPathIds.push(E.id);for(const _ of x.tasks){const Q={..._,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")};a.push(Q)}}catch(h){console.error(`Failed to load learning path ${o}/${c}:`,h)}}return{topics:Array.from(s.values()),learningPaths:e,tasks:a}}function Ns(s){const a={test:{id:"test",title:"Test & Demo",description:"Demonstriert alle Aufgabentypen der Plattform",metadata:{estimatedHours:1,difficultyLevel:"beginner",prerequisites:[]}},mathematik:{id:"mathematik",title:"Mathematik",description:"Grundlagen der Mathematik: Algebra, Geometrie und mehr",metadata:{estimatedHours:40,difficultyLevel:"intermediate",prerequisites:[]}},biologie:{id:"biologie",title:"Biologie",description:"Einf√ºhrung in die Biologie: Zellen, Genetik und √ñkosysteme",metadata:{estimatedHours:35,difficultyLevel:"beginner",prerequisites:[]}},spanisch:{id:"spanisch",title:"Spanisch",description:"Lerne Spanisch: Vokabeln, Grammatik und Konversation",metadata:{estimatedHours:50,difficultyLevel:"beginner",prerequisites:[]}},englisch:{id:"englisch",title:"Englisch",description:"Lerne Englisch: Unregelm√§√üige Verben und mehr",metadata:{estimatedHours:1,difficultyLevel:"beginner",prerequisites:[]}},chemie:{id:"chemie",title:"Chemie",description:"Grundlagen der Chemie: Atome, Molek√ºle und Reaktionen",metadata:{estimatedHours:40,difficultyLevel:"intermediate",prerequisites:[]}},physik:{id:"physik",title:"Physik",description:"Einf√ºhrung in die Physik: Kr√§fte, Energie und Bewegung",metadata:{estimatedHours:45,difficultyLevel:"intermediate",prerequisites:[]}}}[s]||{id:s,title:s.charAt(0).toUpperCase()+s.slice(1),description:`Lernmaterialien f√ºr ${s}`,metadata:{estimatedHours:30,difficultyLevel:"beginner",prerequisites:[]}};return{id:a.id,title:a.title,description:a.description,learningPathIds:[],isActive:!0,metadata:a.metadata,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01")}}async function Bt(s){console.log("üóëÔ∏è Clearing existing database...");const e=await s.topics.count(),a=await s.learningPaths.count(),i=await s.tasks.count();console.log(`Before clear: ${e} topics, ${a} paths, ${i} tasks`),await s.topics.clear(),await s.learningPaths.clear(),await s.tasks.clear();const o=await s.tasks.count();console.log(`After clear: ${o} tasks remaining`),console.log("üìÇ Loading learning paths from JSON files...");const r=await As();if(r.topics.length===0)throw new Error("No learning paths found in JSON files!");console.log(`Saving to database: ${r.topics.length} topics, ${r.learningPaths.length} learning paths, ${r.tasks.length} tasks`),console.log("Topics:",r.topics.map(g=>g.id)),console.log("Learning paths:",r.learningPaths.map(g=>`${g.id} (${g.taskIds?.length||0} taskIds)`)),console.log("Tasks:",r.tasks.map(g=>`${g.id} (learningPathId: ${g.learningPathId})`));try{await s.topics.bulkAdd(r.topics),console.log("‚úì Topics saved")}catch{console.log("‚ö†Ô∏è Topics exist, using bulkPut to update..."),await s.topics.bulkPut(r.topics),console.log("‚úì Topics updated")}try{await s.learningPaths.bulkAdd(r.learningPaths),console.log("‚úì Learning paths saved")}catch{console.log("‚ö†Ô∏è Learning paths exist, using bulkPut to update..."),await s.learningPaths.bulkPut(r.learningPaths),console.log("‚úì Learning paths updated")}try{await s.tasks.bulkAdd(r.tasks),console.log("‚úì Tasks saved")}catch(g){console.error("‚ùå Error saving tasks with bulkAdd:",g.message),console.log("‚ö†Ô∏è Some tasks already exist, using bulkPut to update...");try{await s.tasks.bulkPut(r.tasks),console.log("‚úì Tasks updated with bulkPut")}catch(x){console.error("‚ùå Error with bulkPut:",x.message)}}console.log(`‚úÖ Loaded from JSON: ${r.topics.length} topics, ${r.learningPaths.length} learning paths, ${r.tasks.length} tasks`);const c=await s.topics.count(),h=await s.learningPaths.count(),n=await s.tasks.count();console.log(`‚úÖ Verified in DB: ${c} topics, ${h} learning paths, ${n} tasks`)}class Vt extends Error{constructor(e,a,i){super(e),this.code=a,this.context=i,this.name="LearningPlatformError"}}class Oe extends Vt{constructor(e,a){super(e,"VALIDATION_ERROR",a),this.name="ValidationError"}}class Ye extends Vt{constructor(e,a){super(`${e} with id ${a} not found`,"NOT_FOUND",{resource:e,id:a}),this.name="NotFoundError"}}class _e{id;configuration;execution;results;createdAt;updatedAt;constructor(e){_e.validate(e),this.id=e.id,this.configuration={...e.configuration,learningPathIds:[...e.configuration.learningPathIds]},this.execution={taskIds:[...e.execution.taskIds],completedCount:e.execution.completedCount,correctCount:e.execution.correctCount,status:e.execution.status,totalTimeSpent:e.execution.totalTimeSpent},e.execution.startedAt&&(this.execution.startedAt=new Date(e.execution.startedAt)),e.execution.completedAt&&(this.execution.completedAt=new Date(e.execution.completedAt)),this.results={...e.results,difficultyDistribution:{...e.results.difficultyDistribution},improvementAreas:[...e.results.improvementAreas]},this.createdAt=e.createdAt||new Date,this.updatedAt=e.updatedAt||new Date}static validate(e){if(e.configuration?.targetCount!==void 0&&(e.configuration.targetCount<5||e.configuration.targetCount>50))throw new Oe("Target count must be between 5 and 50",{field:"targetCount",value:e.configuration.targetCount});if(e.execution?.status!==void 0){const a=["planned","active","paused","completed","abandoned"];if(!a.includes(e.execution.status))throw new Oe("Invalid session status",{field:"status",value:e.execution.status,validValues:a})}}static create(e,a,i,o,r){const c={topicId:a,learningPathIds:i,targetCount:r.targetCount,includeReview:r.includeReview};return r.difficultyFilter&&(c.difficultyFilter=r.difficultyFilter),new _e({id:e,configuration:c,execution:{taskIds:o,completedCount:0,correctCount:0,status:"planned",totalTimeSpent:0},results:{accuracy:0,averageTime:0,difficultyDistribution:{},improvementAreas:[]}})}start(){if(this.execution.status!=="planned"&&this.execution.status!=="paused")throw new Error("Can only start planned or paused sessions");this.execution.status="active",this.execution.startedAt||(this.execution.startedAt=new Date),this.updatedAt=new Date}pause(){if(this.execution.status!=="active")throw new Error("Can only pause active sessions");this.execution.status="paused",this.updatedAt=new Date}resume(){if(this.execution.status!=="paused")throw new Error("Can only resume paused sessions");this.execution.status="active",this.updatedAt=new Date}recordAnswer(e,a){if(this.execution.status!=="active")throw new Error("Session must be active to record answers");this.execution.completedCount++,e&&this.execution.correctCount++,this.execution.totalTimeSpent+=a,this.updateResults(),this.updatedAt=new Date}complete(){if(this.execution.status==="completed"||this.execution.status==="abandoned")throw new Error("Session already finalized");this.execution.status="completed",this.execution.completedAt=new Date,this.updateResults(),this.updatedAt=new Date}abandon(){if(this.execution.status==="completed"||this.execution.status==="abandoned")throw new Error("Session already finalized");this.execution.status="abandoned",this.updatedAt=new Date}updateResults(){this.execution.completedCount>0&&(this.results.accuracy=this.execution.correctCount/this.execution.completedCount*100),this.execution.completedCount>0&&(this.results.averageTime=this.execution.totalTimeSpent/this.execution.completedCount)}getProgress(){return this.execution.completedCount/this.configuration.targetCount*100}isComplete(){return this.execution.completedCount>=this.configuration.targetCount}getRemainingCount(){return Math.max(0,this.configuration.targetCount-this.execution.completedCount)}toJSON(){const e={id:this.id,configuration:{...this.configuration,learningPathIds:[...this.configuration.learningPathIds]},execution:{...this.execution,taskIds:[...this.execution.taskIds]},results:{...this.results,difficultyDistribution:{...this.results.difficultyDistribution},improvementAreas:[...this.results.improvementAreas]},createdAt:this.createdAt,updatedAt:this.updatedAt};return this.configuration.difficultyFilter&&(e.configuration.difficultyFilter=this.configuration.difficultyFilter),this.execution.startedAt&&(e.execution.startedAt=this.execution.startedAt),this.execution.completedAt&&(e.execution.completedAt=this.execution.completedAt),e}static fromJSON(e){return new _e(e)}}class xt{constructor(e,a,i){this.sessionRepository=e,this.taskRepository=a,this.spacedRepRepository=i}async createSession(e){const a=await this.selectTasksForSession(e),i=`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,o={targetCount:e.targetCount,includeReview:e.includeReview};e.difficultyFilter&&(o.difficultyFilter=e.difficultyFilter);const r=_e.create(i,e.topicId,e.learningPathIds,a,o);return await this.sessionRepository.create(r.toJSON())}async getSession(e){return await this.sessionRepository.getById(e)}async updateSession(e,a){await this.sessionRepository.update(e,a)}async completeSession(e){const a=await this.sessionRepository.getById(e);if(!a)throw new Ye("PracticeSession",e);const i=_e.fromJSON(a);return i.complete(),await this.sessionRepository.update(e,i.toJSON())}async pauseSession(e){const a=await this.sessionRepository.getById(e);if(!a)throw new Ye("PracticeSession",e);const i=_e.fromJSON(a);i.pause(),await this.sessionRepository.update(e,i.toJSON())}async resumeSession(e){const a=await this.sessionRepository.getById(e);if(!a)throw new Ye("PracticeSession",e);const i=_e.fromJSON(a);i.resume(),await this.sessionRepository.update(e,i.toJSON())}async abandonSession(e){const a=await this.sessionRepository.getById(e);if(!a)throw new Ye("PracticeSession",e);const i=_e.fromJSON(a);i.abandon(),await this.sessionRepository.update(e,i.toJSON())}async getActiveSessions(e){return await this.sessionRepository.getActive(e)}async getRecentSessions(e,a){return await this.sessionRepository.getRecent(e,a)}async recordSessionAnswer(e,a,i){const o=await this.sessionRepository.getById(e);if(!o)throw new Ye("PracticeSession",e);const r=_e.fromJSON(o);r.execution.status==="planned"&&r.start(),r.recordAnswer(a,i),r.isComplete()&&r.complete(),await this.sessionRepository.update(e,r.toJSON())}async selectTasksForSession(e){const a=[];let i=e.targetCount;if(console.log(`Selecting tasks: targetCount=${e.targetCount}, learningPaths=${e.learningPathIds.join(",")}`),e.includeReview&&i>0){const o=await this.spacedRepRepository.getDue(new Date),r=o.slice(0,Math.min(o.length,Math.ceil(e.targetCount*.3))).map(c=>c.taskId);console.log(`Review tasks found: ${r.length}`),a.push(...r),i-=r.length}if(i>0){const o={learningPathIds:e.learningPathIds,excludeIds:a};e.difficultyFilter&&(o.difficulty=e.difficultyFilter),console.log(`Requesting ${i} new tasks with filters:`,o);const r=await this.taskRepository.getRandomTasks(i,o);console.log(`Got ${r.length} tasks:`,r.map(c=>c.id)),a.push(...r.map(c=>c.id))}return console.log(`Total selected tasks: ${a.length}`),a}}class Qe{id;taskId;algorithm;schedule;performance;metadata;createdAt;updatedAt;constructor(e){Qe.validate(e),this.id=e.id,this.taskId=e.taskId,this.algorithm={...e.algorithm},this.schedule={...e.schedule,nextReview:new Date(e.schedule.nextReview)},e.schedule.lastReviewed&&(this.schedule.lastReviewed=new Date(e.schedule.lastReviewed)),this.performance={...e.performance},this.metadata={...e.metadata,introduced:new Date(e.metadata.introduced)},this.createdAt=e.createdAt||new Date,this.updatedAt=e.updatedAt||new Date}static validate(e){if(e.algorithm?.efactor!==void 0&&(e.algorithm.efactor<1.3||e.algorithm.efactor>2.5))throw new Oe("Efactor must be between 1.3 and 2.5",{field:"efactor",value:e.algorithm.efactor});if(e.algorithm?.interval!==void 0&&(e.algorithm.interval<0||e.algorithm.interval>365))throw new Oe("Interval must be between 0 and 365 days",{field:"interval",value:e.algorithm.interval});if(e.performance?.lastGrade!==void 0&&(e.performance.lastGrade<0||e.performance.lastGrade>5))throw new Oe("Grade must be between 0 and 5",{field:"lastGrade",value:e.performance.lastGrade});if(e.performance?.averageAccuracy!==void 0&&(e.performance.averageAccuracy<0||e.performance.averageAccuracy>100))throw new Oe("Average accuracy must be between 0 and 100",{field:"averageAccuracy",value:e.performance.averageAccuracy})}static createNew(e,a){return new Qe({id:a,taskId:e,algorithm:{interval:1,repetition:0,efactor:2.5},schedule:{nextReview:new Date(Date.now()+24*60*60*1e3),totalReviews:0,consecutiveCorrect:0},performance:{averageAccuracy:0,averageTime:0,difficultyRating:3,lastGrade:0},metadata:{introduced:new Date,graduated:!1,lapseCount:0}})}recordAnswer(e,a){if(e<0||e>5)throw new Oe("Grade must be between 0 and 5",{field:"grade",value:e});if(this.performance.lastGrade=e,this.updateAverageAccuracy(e>=3),this.updateAverageTime(a),this.schedule.totalReviews++,this.schedule.lastReviewed=new Date,e<3)this.algorithm.repetition=0,this.algorithm.interval=1,this.schedule.consecutiveCorrect=0,this.metadata.lapseCount++,this.metadata.graduated=!1;else{this.schedule.consecutiveCorrect++;const i=.1-(5-e)*(.08+(5-e)*.02);this.algorithm.efactor=Math.max(1.3,this.algorithm.efactor+i),this.algorithm.efactor=Math.min(2.5,this.algorithm.efactor),this.algorithm.repetition===0?this.algorithm.interval=1:this.algorithm.repetition===1?this.algorithm.interval=6:this.algorithm.interval=Math.round(this.algorithm.interval*this.algorithm.efactor),this.algorithm.interval=Math.min(365,this.algorithm.interval),this.algorithm.repetition++,this.algorithm.repetition>=2&&(this.metadata.graduated=!0)}this.schedule.nextReview=new Date(Date.now()+this.algorithm.interval*24*60*60*1e3),this.updatedAt=new Date}updateAverageAccuracy(e){const a=this.schedule.totalReviews,o=this.performance.averageAccuracy/100*(a-1)+(e?1:0);this.performance.averageAccuracy=o/a*100}updateAverageTime(e){const a=this.schedule.totalReviews,o=this.performance.averageTime*(a-1)+e;this.performance.averageTime=o/a}isDue(){return this.schedule.nextReview.getTime()<=Date.now()}daysUntilReview(){const e=this.schedule.nextReview.getTime()-Date.now();return Math.ceil(e/(24*60*60*1e3))}toJSON(){const e={id:this.id,taskId:this.taskId,algorithm:{...this.algorithm},schedule:{nextReview:this.schedule.nextReview,totalReviews:this.schedule.totalReviews,consecutiveCorrect:this.schedule.consecutiveCorrect},performance:{...this.performance},metadata:{introduced:this.metadata.introduced,graduated:this.metadata.graduated,lapseCount:this.metadata.lapseCount},createdAt:this.createdAt,updatedAt:this.updatedAt};return this.schedule.lastReviewed&&(e.schedule.lastReviewed=this.schedule.lastReviewed),e}static fromJSON(e){return new Qe(e)}}class Cs{constructor(e,a){this.spacedRepRepository=e,this.taskRepository=a}async getNextTasks(e,a){const r=(await this.spacedRepRepository.getDue(new Date)).sort((h,n)=>n.metadata.lapseCount!==h.metadata.lapseCount?n.metadata.lapseCount-h.metadata.lapseCount:h.schedule.nextReview.getTime()-n.schedule.nextReview.getTime()).slice(0,a),c=[];for(const h of r){const n=await this.taskRepository.getById(h.taskId);n&&c.push(n)}return c}async recordAnswer(e,a,i){if(i<0||i>5)throw new Error("Grade must be between 0 and 5");let o=await this.spacedRepRepository.getByTaskId(e);if(!o){const c=Qe.createNew(e,`sr-${e}-${Date.now()}`);o=await this.spacedRepRepository.create(c.toJSON())}const r=Qe.fromJSON(o);r.recordAnswer(i,0),await this.spacedRepRepository.update(o.id,r.toJSON())}async getRepetitionData(e){return await this.spacedRepRepository.getByTaskId(e)}async getTasksDue(e){const a=await this.spacedRepRepository.getDue(new Date),i=[];for(const o of a){const r=await this.taskRepository.getById(o.taskId);r&&i.push(r)}return i}async getReviewSchedule(e,a){const i=[],o=new Date;for(let r=0;r<a;r++){const c=new Date(o);c.setDate(c.getDate()+r),c.setHours(23,59,59,999);const h=await this.spacedRepRepository.getByNextReviewDate(c);let n=0;for(const g of h)n+=g.performance.averageTime||3e4;i.push({date:c,taskCount:h.length,estimatedTime:Math.round(n/1e3)})}return i}async rescheduleTask(e,a){const i=await this.spacedRepRepository.getByTaskId(e);if(!i)throw new Ye("SpacedRepetitionItem",e);await this.spacedRepRepository.updateSchedule(i.id,{...i.schedule,nextReview:a})}async getStatistics(e){const a=await this.spacedRepRepository.getAll(),i=await this.spacedRepRepository.getDue(new Date),o=a.filter(h=>h.metadata.graduated).length,r=a.reduce((h,n)=>h+n.algorithm.interval,0),c=a.reduce((h,n)=>h+n.performance.averageAccuracy,0);return{totalItems:a.length,dueToday:i.length,graduated:o,averageInterval:a.length>0?r/a.length:0,averageAccuracy:a.length>0?c/a.length:0}}}class Ts{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getActive(){return await this.table.where("isActive").equals(1).toArray()}async search(e){const a=e.toLowerCase();return await this.table.filter(i=>i.title.toLowerCase().includes(a)).toArray()}async getByTitle(e){return null}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Es{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getByTopicId(e){return await this.table.where("topicId").equals(e).toArray()}async getByDifficulty(e){return await this.table.where("difficulty").equals(e).toArray()}async getActive(){return await this.table.where("isActive").equals(1).toArray()}async searchByTitle(e){return[]}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Rs{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getByLearningPathId(e){return await this.table.where("learningPathId").equals(e).toArray()}async getRandomTasks(e,a){console.log(`[TaskRepository] getRandomTasks called: count=${e}, filters=`,a);let i;if(a?.learningPathIds?(i=await this.table.where("learningPathId").anyOf(a.learningPathIds).toArray(),console.log(`[TaskRepository] Found ${i.length} tasks for learning paths:`,a.learningPathIds),console.log("[TaskRepository] Task IDs:",i.map(c=>c.id))):(i=await this.table.toArray(),console.log(`[TaskRepository] Found ${i.length} tasks (no filter)`)),a?.excludeIds){const c=i.length;i=i.filter(h=>!a.excludeIds.includes(h.id)),console.log(`[TaskRepository] After excluding IDs: ${c} -> ${i.length} tasks`)}const o=i.sort(()=>Math.random()-.5),r=[];if(o.length===0)return console.log("[TaskRepository] No tasks available!"),r;for(let c=0;c<e;c++){const h=o[c%o.length];h&&r.push(h)}return console.log(`[TaskRepository] Returning ${r.length} tasks (${o.length} unique, repeated to reach ${e})`),r}async getByLearningPathIds(e){return[]}async getByType(e){return[]}async getByDifficulty(e){return[]}async getByTags(e){return[]}async search(e){return[]}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Is{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getByTaskId(e){return await this.table.where("taskId").equals(e).toArray()}async getBySessionId(e){return await this.table.where("sessionId").equals(e).toArray()}async getByUserId(e,a){return[]}async getByDateRange(e,a){return[]}async getCorrectAnswers(e){return await this.table.where("taskId").equals(e).filter(a=>a.isCorrect).toArray()}async getIncorrectAnswers(e){return await this.table.where("taskId").equals(e).filter(a=>!a.isCorrect).toArray()}async getAccuracyForPeriod(e,a,i){return 0}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Ds{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getByTopicId(e){return(await this.table.where("topicId").equals(e).toArray())[0]||null}async getByLearningPathId(e){return(await this.table.where("learningPathId").equals(e).toArray())[0]||null}async getByUserId(e){return[]}async updateStatistics(e,a){}async incrementTaskCount(e,a){}async updateStreak(e,a){}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Ps{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getActive(e){return await this.table.where("execution.status").anyOf(["planned","active","paused"]).toArray()}async getRecent(e,a){return await this.table.orderBy("createdAt").reverse().limit(a).toArray()}async getByStatus(e){return await this.table.where("execution.status").equals(e).toArray()}async getByUserId(e){return[]}async getByDateRange(e,a){return[]}async updateStatus(e,a){}async incrementProgress(e,a,i){}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Bs{constructor(e){this.table=e}async create(e){return await this.table.add(e),e}async getById(e){return await this.table.get(e)||null}async getAll(){return await this.table.toArray()}async update(e,a){return await this.table.update(e,a),await this.table.get(e)}async delete(e){await this.table.delete(e)}async getByTaskId(e){return(await this.table.where("taskId").equals(e).toArray())[0]||null}async getDue(e){return await this.table.where("schedule.nextReview").belowOrEqual(e).toArray()}async getByNextReviewDate(e){return[]}async updateAlgorithmData(e,a){}async updateSchedule(e,a){}async updatePerformance(e,a){}async getReviewCalendar(e,a){return[]}async createMany(e){return[]}async updateMany(e){}async deleteMany(e){}async count(){return await this.table.count()}async exists(e){return!!await this.table.get(e)}}class Et{static topicRepo;static learningPathRepo;static taskRepo;static answerHistoryRepo;static userProgressRepo;static practiceSessionRepo;static spacedRepetitionRepo;static getTopicRepository(){return this.topicRepo||(this.topicRepo=new Ts(F.topics)),this.topicRepo}static getLearningPathRepository(){return this.learningPathRepo||(this.learningPathRepo=new Es(F.learningPaths)),this.learningPathRepo}static getTaskRepository(){return this.taskRepo||(this.taskRepo=new Rs(F.tasks)),this.taskRepo}static getAnswerHistoryRepository(){return this.answerHistoryRepo||(this.answerHistoryRepo=new Is(F.answerHistory)),this.answerHistoryRepo}static getUserProgressRepository(){return this.userProgressRepo||(this.userProgressRepo=new Ds(F.userProgress)),this.userProgressRepo}static getPracticeSessionRepository(){return this.practiceSessionRepo||(this.practiceSessionRepo=new Ps(F.practiceSessions)),this.practiceSessionRepo}static getSpacedRepetitionRepository(){return this.spacedRepetitionRepo||(this.spacedRepetitionRepo=new Bs(F.spacedRepetition)),this.spacedRepetitionRepo}static reset(){this.topicRepo=null,this.learningPathRepo=null,this.taskRepo=null,this.answerHistoryRepo=null,this.userProgressRepo=null,this.practiceSessionRepo=null,this.spacedRepetitionRepo=null}}const pt=()=>Et.getTaskRepository(),wt=()=>Et.getPracticeSessionRepository(),ht=()=>Et.getSpacedRepetitionRepository(),kt={audioUrl:null,status:"stopped",currentTime:0,duration:0,autoPlayUnlocked:!1,preloadedNextUrl:null,error:null},Ls=500,Ms=2048,$s=100;class zs{audio=null;state={...kt};stateListeners=new Set;preloadedAudio=null;autoPlayTimer=null;lastPlayTime=0;async initialize(){this.setState({...kt})}async loadAudio(e,a,i){if(this.stop(),this.clearAutoPlayTimer(),!e.audioUrl)throw new Error("Task does not have an audio URL");if(!this.validateAudioUrl(e.audioUrl))throw new Error("Invalid audio URL");this.audio=new Audio(e.audioUrl),this.setState({audioUrl:e.audioUrl,status:"loading",currentTime:0,duration:0,autoPlayUnlocked:this.state.autoPlayUnlocked,preloadedNextUrl:this.state.preloadedNextUrl,error:null}),this.audio.addEventListener("loadedmetadata",()=>{this.audio&&this.setState({...this.state,duration:this.audio.duration,status:"stopped"})}),this.audio.addEventListener("timeupdate",()=>{this.audio&&this.state.status==="playing"&&this.setState({...this.state,currentTime:this.audio.currentTime})}),this.audio.addEventListener("ended",()=>{this.setState({...this.state,status:"stopped",currentTime:0})}),this.audio.addEventListener("error",r=>{this.setState({...this.state,status:"error",error:`Failed to load audio: ${r.message||"Unknown error"}`})}),this.audio.load(),i&&this.state.autoPlayUnlocked&&(this.autoPlayTimer=window.setTimeout(async()=>{try{await this.play()}catch(r){console.error("Auto-play failed:",r)}},Ls))}async play(){if(!this.audio)throw new Error("No audio loaded");const e=Date.now();if(e-this.lastPlayTime<$s){console.warn("Rate limit: Too many play() calls. Please wait.");return}this.lastPlayTime=e;try{await this.audio.play(),this.setState({...this.state,status:"playing"})}catch(i){throw i.name==="NotAllowedError"&&this.setState({...this.state,status:"error",error:"Auto-play blocked by browser. Please click to enable audio."}),i}}pause(){this.audio&&(this.audio.pause(),this.setState({...this.state,status:"paused",currentTime:this.audio.currentTime}))}stop(){this.audio&&(this.audio.pause(),this.audio.currentTime=0,this.setState({...this.state,status:"stopped",currentTime:0}))}async replay(){if(!this.audio)throw new Error("No audio loaded");this.audio.currentTime=0,await this.play()}async togglePlayPause(){this.state.status==="playing"?this.pause():(this.state.status==="paused"||this.state.status==="stopped")&&await this.play()}preloadNext(e){e.audioUrl&&(this.preloadedAudio=new Audio(e.audioUrl),this.preloadedAudio.preload="auto",this.setState({...this.state,preloadedNextUrl:e.audioUrl}))}async checkAutoPlayPermission(){return this.state.autoPlayUnlocked}async unlockAutoPlay(){return this.setState({...this.state,autoPlayUnlocked:!0}),!0}getPlaybackState(){return{...this.state}}onStateChange(e){return this.stateListeners.add(e),()=>{this.stateListeners.delete(e)}}dispose(){this.clearAutoPlayTimer(),this.audio&&(this.audio.pause(),this.audio.src="",this.audio=null),this.preloadedAudio&&(this.preloadedAudio.src="",this.preloadedAudio=null),this.setState({...kt}),this.stateListeners.clear()}setState(e){this.state=e,this.stateListeners.forEach(a=>{a(e)})}clearAutoPlayTimer(){this.autoPlayTimer!==null&&(window.clearTimeout(this.autoPlayTimer),this.autoPlayTimer=null)}validateAudioUrl(e){return e.length>Ms?(console.warn("Audio URL exceeds maximum length"),!1):e.startsWith("/audio/")||e.includes("/audio/")||e.startsWith("data:audio/")?!0:(console.warn("Audio URL must contain /audio/ or start with data:audio/",e),!1)}}function Os(){return new zs}function Fs(){const s=u.useRef(null),[e,a]=u.useState({audioUrl:null,status:"stopped",currentTime:0,duration:0,autoPlayUnlocked:!1,preloadedNextUrl:null,error:null});return u.useEffect(()=>{const E=Os();s.current=E,E.initialize().catch(_=>{console.error("Failed to initialize audio service:",_)});const B=E.onStateChange(_=>{a(_)});return()=>{E.stop(),B(),E.dispose(),s.current=null}},[]),{playbackState:e,loadAudio:async(E,B,_)=>{if(!s.current)throw new Error("Audio service not initialized");await s.current.loadAudio(E,B,_)},play:async()=>{if(!s.current)throw new Error("Audio service not initialized");await s.current.play()},pause:()=>{s.current?.pause()},stop:()=>{s.current?.stop()},replay:async()=>{if(!s.current)throw new Error("Audio service not initialized");await s.current.replay()},togglePlayPause:async()=>{if(!s.current)throw new Error("Audio service not initialized");await s.current.togglePlayPause()},preloadNext:E=>{s.current?.preloadNext(E)},checkAutoPlayPermission:async()=>s.current?s.current.checkAutoPlayPermission():!1,unlockAutoPlay:async()=>s.current?s.current.unlockAutoPlay():!1}}const ze={version:2,autoPlayEnabled:!0,languageFilter:"non-German only",perTopicOverrides:{},accessibilityMode:!1};function jt(s){const e=s;if(typeof e.autoPlayEnabled!="boolean")throw new Error("autoPlayEnabled must be boolean");if(!["non-German only","all languages","none"].includes(e.languageFilter))throw new Error(`Invalid languageFilter value: ${e.languageFilter}`);if(e.perTopicOverrides&&typeof e.perTopicOverrides!="object")throw new Error("perTopicOverrides must be object");if(typeof e.accessibilityMode!="boolean")throw new Error("accessibilityMode must be boolean");if(typeof e.version!="number"||e.version<1)throw new Error("version must be positive integer");return e}const rt="audioSettings",Us=500;class Hs{saveTimer=null;load(){try{const e=localStorage.getItem(rt);if(!e)return{...ze};const a=JSON.parse(e);return a.version!==ze.version?this.migrate(a):jt(a)}catch(e){return console.error("Failed to load audio settings, using defaults:",e),{...ze}}}save(e){try{jt(e),this.saveTimer!==null&&window.clearTimeout(this.saveTimer),typeof globalThis.describe=="function"&&typeof globalThis.it=="function"?localStorage.setItem(rt,JSON.stringify(e)):this.saveTimer=window.setTimeout(()=>{localStorage.setItem(rt,JSON.stringify(e)),this.saveTimer=null},Us)}catch(a){throw console.error("Failed to save audio settings:",a),a}}update(e){const a=this.load(),i={...a,...e,version:e.version??a.version,perTopicOverrides:{...a.perTopicOverrides,...e.perTopicOverrides??{}}};this.save(i)}reset(){localStorage.removeItem(rt)}exists(){return localStorage.getItem(rt)!==null}migrate(e){const a={version:2,autoPlayEnabled:e.version===1?!0:e.autoPlayEnabled??ze.autoPlayEnabled,languageFilter:e.languageFilter??ze.languageFilter,perTopicOverrides:e.perTopicOverrides??{},accessibilityMode:e.accessibilityMode??ze.accessibilityMode};try{return jt(a),this.save(a),a}catch(i){return console.error("Migration failed, using defaults:",i),{...ze}}}}function Vs(){return new Hs}function qt(){const s=u.useRef(null),[e,a]=u.useState(null),[i,o]=u.useState(!1);return u.useEffect(()=>{const h=Vs();s.current=h;const n=h.load();a(n),o(!0)},[]),{settings:e||{version:1,autoPlayEnabled:!0,languageFilter:"non-German only",perTopicOverrides:{},accessibilityMode:!1},updateSettings:h=>{if(!s.current||!e){console.warn("Audio settings not loaded yet");return}s.current.update(h);const n=s.current.load();a(n)},resetSettings:()=>{if(!s.current){console.warn("Audio settings not loaded yet");return}s.current.reset();const h=s.current.load();a(h)},isLoaded:i}}function qs(s,e){if(!s.hasAudio||!s.audioUrl||!e.autoPlayEnabled)return!1;const a=s.language||"German";switch(e.languageFilter){case"none":return!1;case"all languages":return!0;case"non-German only":return a!=="German";default:return!1}}const St=new Map;async function Ws(s){if(St.has(s))return St.get(s);try{const e=await fetch(`/learning-platform/test/templates/${s}.json`);if(!e.ok)return console.warn(`Template ${s} not found`),null;const a=await e.json();return St.set(s,a),a}catch(e){return console.error(`Failed to load template ${s}:`,e),null}}async function Gs(s){return(await Ws(s))?.audioConfig||null}function Wt(s){var e,a,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(a=Wt(s[e]))&&(i&&(i+=" "),i+=a)}else for(a in s)s[a]&&(i&&(i+=" "),i+=a);return i}function U(){for(var s,e,a=0,i="",o=arguments.length;a<o;a++)(s=arguments[a])&&(e=Wt(s))&&(i&&(i+=" "),i+=e);return i}const Js="_pulse_1m38x_1",be={"audio-button":"_audio-button_1m38x_4","audio-button--disabled":"_audio-button--disabled_1m38x_15","audio-button--small":"_audio-button--small_1m38x_24","audio-button--medium":"_audio-button--medium_1m38x_29","audio-button--large":"_audio-button--large_1m38x_34","audio-button--playing":"_audio-button--playing_1m38x_52","audio-button--active":"_audio-button--active_1m38x_59","audio-button__icon":"_audio-button__icon_1m38x_69","audio-button__icon--playing":"_audio-button__icon--playing_1m38x_73",pulse:Js,"audio-button-inline":"_audio-button-inline_1m38x_88"},Lt=({size:s})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",style:{width:s,height:s},children:t.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})}),Ks=({size:s})=>t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",style:{width:s,height:s},children:t.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"})}),Ys=({text:s,audioUrl:e,className:a,disabled:i=!1,size:o="medium"})=>{const[r,c]=u.useState(!1),[h,n]=u.useState(null),g=u.useRef(null),x=!!e,L=async()=>{if(!(i||!x||!e)){n(null);try{g.current||(g.current=new Audio(e),g.current.addEventListener("ended",()=>c(!1)),g.current.addEventListener("error",()=>{n("Audio playback failed"),c(!1)})),g.current.currentTime=0,c(!0),await g.current.play()}catch(_){console.error("Failed to play audio:",_),n("Audio playback failed"),c(!1)}}},E={small:"16px",medium:"20px",large:"24px"},B=i||!x;return t.jsx("span",{onClick:B?void 0:L,className:U(be["audio-button"],be[`audio-button--${o}`],B&&be["audio-button--disabled"],r&&be["audio-button--playing"],!B&&!r&&be["audio-button--active"],a),title:x?r?"Spielt ab...":`Aussprache abspielen: ${s}`:"Audio nicht verf√ºgbar","aria-label":`Spanische Aussprache f√ºr ${s} abspielen`,role:"button",tabIndex:B?-1:0,onKeyDown:_=>{!B&&(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),L())},children:r?t.jsx("div",{className:U(be["audio-button__icon"],be["audio-button__icon--playing"]),children:t.jsx(Lt,{size:E[o]})}):!x||h?t.jsx("div",{className:be["audio-button__icon"],children:t.jsx(Ks,{size:E[o]})}):t.jsx("div",{className:be["audio-button__icon"],children:t.jsx(Lt,{size:E[o]})})})},xe=u.memo(Ys),Qs="_card_1cbjp_4",qe={card:Qs,"card--shadow":"_card--shadow_1cbjp_11","card--no-shadow":"_card--no-shadow_1cbjp_15","card--border":"_card--border_1cbjp_20","card--no-border":"_card--no-border_1cbjp_24","card--padding-small":"_card--padding-small_1cbjp_29","card--padding-medium":"_card--padding-medium_1cbjp_33","card--padding-large":"_card--padding-large_1cbjp_37"};function Pe({padding:s="medium",shadow:e=!0,border:a=!0,borderColor:i,backgroundColor:o,children:r,className:c,style:h,...n}){const g={...o&&{backgroundColor:o},...i&&{borderColor:i},...h};return t.jsx("div",{...n,style:g,className:U(qe.card,qe[`card--padding-${s}`],e?qe["card--shadow"]:qe["card--no-shadow"],a?qe["card--border"]:qe["card--no-border"],c),children:r})}const H={primary:{500:"#3b82f6"},success:{100:"#dcfce7",300:"#86efac",500:"#10b981"},error:{100:"#fee2e2",300:"#fca5a5",500:"#ef4444"},warning:{100:"#fef3c7",400:"#fbbf24",500:"#f59e0b"},info:{100:"#f3e8ff",300:"#d8b4fe",500:"#8b5cf6"}},se={feedback:{success:H.success[500],successLight:H.success[100],successBorder:H.success[300],error:H.error[500],errorLight:H.error[100],errorBorder:H.error[300],warning:H.warning[500],warningLight:H.warning[100],warningBorder:H.warning[400],info:H.info[500],infoLight:H.info[100],infoBorder:H.info[300]}},Ie={"feedback-content":"_feedback-content_1oyn0_4","feedback-icon":"_feedback-icon_1oyn0_11","feedback-text":"_feedback-text_1oyn0_19","feedback-title":"_feedback-title_1oyn0_24","feedback-message":"_feedback-message_1oyn0_32","feedback-children":"_feedback-children_1oyn0_39","feedback-dismiss":"_feedback-dismiss_1oyn0_45","feedback--success":"_feedback--success_1oyn0_62","feedback--error":"_feedback--error_1oyn0_71","feedback--warning":"_feedback--warning_1oyn0_80","feedback--info":"_feedback--info_1oyn0_89"};function Gt({variant:s,title:e,message:a,dismissible:i=!1,onDismiss:o,children:r,className:c,style:h,...n}){const g=ae.useMemo(()=>Zs(s),[s]),x=ae.useMemo(()=>Xs(s),[s]);return t.jsx(Pe,{...n,padding:"medium",shadow:!1,border:!0,borderColor:g.border,backgroundColor:g.background,style:h,className:U(Ie[`feedback--${s}`],c),role:s==="error"||s==="warning"?"alert":"status","aria-live":s==="error"||s==="warning"?"assertive":"polite","aria-atomic":"true",children:t.jsxs("div",{className:Ie["feedback-content"],children:[t.jsx("div",{className:Ie["feedback-icon"],"aria-hidden":"true",children:x}),t.jsxs("div",{className:Ie["feedback-text"],children:[e&&t.jsx("h4",{className:Ie["feedback-title"],children:e}),r?t.jsx("div",{className:Ie["feedback-children"],children:r}):a&&t.jsx("p",{className:Ie["feedback-message"],children:a})]}),i&&o&&t.jsx("button",{onClick:o,className:Ie["feedback-dismiss"],"aria-label":`Dismiss ${s} message`,children:t.jsx("span",{"aria-hidden":"true",children:"‚úï"})})]})})}function Zs(s){switch(s){case"success":return{background:se.feedback.successLight,border:se.feedback.successBorder,text:se.feedback.success};case"error":return{background:se.feedback.errorLight,border:se.feedback.errorBorder,text:se.feedback.error};case"warning":return{background:se.feedback.warningLight,border:se.feedback.warningBorder,text:se.feedback.warning};case"info":return{background:se.feedback.infoLight,border:se.feedback.infoBorder,text:se.feedback.info};default:return{background:se.feedback.infoLight,border:se.feedback.infoBorder,text:se.feedback.info}}}function Xs(s){switch(s){case"success":return"‚úì";case"error":return"‚úó";case"warning":return"‚ö†";case"info":return"‚Ñπ";default:return"‚Ñπ"}}const ea="_input_1krva_4",ye={"input-wrapper":"_input-wrapper_1krva_4","input-wrapper--full-width":"_input-wrapper--full-width_1krva_8",input:ea,"input--full-width":"_input--full-width_1krva_27","input--error":"_input--error_1krva_40","input--success":"_input--success_1krva_46","input__helper-text--error":"_input__helper-text--error_1krva_72","input__helper-text--success":"_input__helper-text--success_1krva_76"};function Tt({value:s,onChange:e,error:a=!1,success:i=!1,helperText:o,fullWidth:r=!1,disabled:c=!1,className:h,style:n,id:g,...x}){const L=o?`${g||"input"}-helper`:void 0;return t.jsxs("div",{className:U(ye["input-wrapper"],r&&ye["input-wrapper--full-width"]),children:[t.jsx("input",{...x,id:g,type:"text",value:s,onChange:e,disabled:c,style:n,className:U(ye.input,r&&ye["input--full-width"],a&&ye["input--error"],i&&ye["input--success"],h),"aria-invalid":a?"true":"false","aria-describedby":L}),o&&t.jsx("div",{id:L,className:U(ye.input__helper_text,a&&ye["input__helper-text--error"],i&&ye["input__helper-text--success"]),children:o})]})}const ta="_checkbox_uclkx_4",sa="_checkbox__checkmark_uclkx_83",aa="_checkbox__label_uclkx_101",le={"checkbox-container":"_checkbox-container_uclkx_4","checkbox-container--disabled":"_checkbox-container--disabled_uclkx_11","checkbox-wrapper":"_checkbox-wrapper_uclkx_16",checkbox:ta,"checkbox--with-label":"_checkbox--with-label_uclkx_35","checkbox--error":"_checkbox--error_uclkx_55","checkbox--success":"_checkbox--success_uclkx_66",checkbox__checkmark:sa,"checkbox__checkmark--visible":"_checkbox__checkmark--visible_uclkx_96",checkbox__label:aa,"checkbox__label--disabled":"_checkbox__label--disabled_uclkx_107"};function Jt({checked:s,onChange:e,label:a,error:i=!1,success:o=!1,disabled:r=!1,className:c,style:h,id:n,...g}){const x=ae.useId(),L=n||`checkbox-${x}`;return t.jsxs("label",{htmlFor:L,style:h,className:U(le["checkbox-container"],r&&le["checkbox-container--disabled"],c),children:[t.jsxs("div",{className:le["checkbox-wrapper"],children:[t.jsx("input",{...g,type:"checkbox",id:L,checked:s,onChange:e,disabled:r,className:U(le.checkbox,a&&le["checkbox--with-label"],i&&le["checkbox--error"],o&&le["checkbox--success"]),"aria-checked":s,"aria-invalid":i}),t.jsx("div",{className:U(le.checkbox__checkmark,s&&le["checkbox__checkmark--visible"])})]}),a&&t.jsx("span",{className:U(le.checkbox__label,r&&le["checkbox__label--disabled"]),children:a})]})}const na="_select_1bjtk_4",_t={select:na,"select--full-width":"_select--full-width_1bjtk_23","select--error":"_select--error_1bjtk_36","select--success":"_select--success_1bjtk_42"};function Kt({value:s,onChange:e,options:a,disabled:i=!1,placeholder:o,error:r=!1,success:c=!1,fullWidth:h=!1,className:n,style:g,id:x}){return t.jsxs("select",{id:x,value:s,onChange:L=>e(L.target.value),disabled:i,style:g,className:U(_t.select,h&&_t["select--full-width"],r&&_t["select--error"],c&&_t["select--success"],n),"aria-invalid":r?"true":"false",children:[o&&t.jsx("option",{value:"",disabled:!0,children:o}),a.map(L=>t.jsx("option",{value:L.value,disabled:L.disabled,children:L.label},L.value))]})}const ve={"slider-container":"_slider-container_1ivuv_4","slider-track":"_slider-track_1ivuv_12","slider-fill":"_slider-fill_1ivuv_22","slider-fill--disabled":"_slider-fill--disabled_1ivuv_32","slider-input":"_slider-input_1ivuv_37","slider-thumb":"_slider-thumb_1ivuv_52","slider-thumb--disabled":"_slider-thumb--disabled_1ivuv_67","slider-value-display":"_slider-value-display_1ivuv_72","slider-value-display__current":"_slider-value-display__current_1ivuv_80"};function Yt({value:s,onChange:e,min:a,max:i,step:o=1,disabled:r=!1,unit:c="",showValue:h=!0,className:n,style:g,id:x,"aria-label":L}){const E=(s-a)/(i-a)*100;return t.jsxs("div",{style:g,className:U(ve["slider-container"],n),children:[t.jsxs("div",{className:ve["slider-track"],children:[t.jsx("div",{className:U(ve["slider-fill"],r&&ve["slider-fill--disabled"]),style:{width:`${E}%`}}),t.jsx("div",{className:U(ve["slider-thumb"],r&&ve["slider-thumb--disabled"]),style:{left:`calc(${E}% - 12px)`}}),t.jsx("input",{type:"range",id:x,min:a,max:i,step:o,value:s,onChange:B=>e(Number(B.target.value)),disabled:r,className:ve["slider-input"],"aria-label":L,"aria-valuenow":s,"aria-valuemin":a,"aria-valuemax":i,"aria-valuetext":`${s}${c}`})]}),h&&t.jsxs("div",{className:ve["slider-value-display"],children:[t.jsxs("span",{children:[a,c]}),t.jsxs("span",{className:ve["slider-value-display__current"],children:[s,c]}),t.jsxs("span",{children:[i,c]})]})]})}const l={"practice-session":"_practice-session_elovc_3","practice-session__header":"_practice-session__header_elovc_14","practice-session__header-top":"_practice-session__header-top_elovc_19","practice-session__header-left":"_practice-session__header-left_elovc_26","practice-session__title":"_practice-session__title_elovc_32","practice-session__task-counter":"_practice-session__task-counter_elovc_37","practice-session__task-id":"_practice-session__task-id_elovc_42","practice-session__cancel-btn":"_practice-session__cancel-btn_elovc_48","practice-session__progress-bar":"_practice-session__progress-bar_elovc_58","practice-session__progress-fill":"_practice-session__progress-fill_elovc_66","practice-session__question-area":"_practice-session__question-area_elovc_74","practice-session__question-header":"_practice-session__question-header_elovc_85","practice-session__question-text":"_practice-session__question-text_elovc_92","practice-session__mc-options":"_practice-session__mc-options_elovc_101","practice-session__mc-option":"_practice-session__mc-option_elovc_101","practice-session__mc-option--focused":"_practice-session__mc-option--focused_elovc_125","practice-session__mc-option--selected":"_practice-session__mc-option--selected_elovc_130","practice-session__mc-option--correct":"_practice-session__mc-option--correct_elovc_135","practice-session__mc-option--incorrect":"_practice-session__mc-option--incorrect_elovc_140","practice-session__mc-option--disabled":"_practice-session__mc-option--disabled_elovc_145","practice-session__cloze-container":"_practice-session__cloze-container_elovc_151","practice-session__cloze-text":"_practice-session__cloze-text_elovc_156","practice-session__cloze-input":"_practice-session__cloze-input_elovc_161","practice-session__cloze-feedback":"_practice-session__cloze-feedback_elovc_167","practice-session__cloze-feedback-title":"_practice-session__cloze-feedback-title_elovc_174","practice-session__cloze-answer":"_practice-session__cloze-answer_elovc_181","practice-session__cloze-answer--correct":"_practice-session__cloze-answer--correct_elovc_186","practice-session__cloze-answer--neutral":"_practice-session__cloze-answer--neutral_elovc_190","practice-session__cloze-answer-correct":"_practice-session__cloze-answer-correct_elovc_194","practice-session__cloze-alternatives":"_practice-session__cloze-alternatives_elovc_198","practice-session__tf-container":"_practice-session__tf-container_elovc_205","practice-session__tf-statement":"_practice-session__tf-statement_elovc_213","practice-session__tf-buttons":"_practice-session__tf-buttons_elovc_219","practice-session__tf-button":"_practice-session__tf-button_elovc_219","practice-session__tf-button--selected":"_practice-session__tf-button--selected_elovc_236","practice-session__tf-button--correct":"_practice-session__tf-button--correct_elovc_241","practice-session__tf-button--incorrect":"_practice-session__tf-button--incorrect_elovc_246","practice-session__tf-button--disabled":"_practice-session__tf-button--disabled_elovc_251","practice-session__ordering-container":"_practice-session__ordering-container_elovc_257","practice-session__ordering-instruction":"_practice-session__ordering-instruction_elovc_262","practice-session__ordering-items":"_practice-session__ordering-items_elovc_268","practice-session__ordering-item":"_practice-session__ordering-item_elovc_268","practice-session__ordering-item--correct":"_practice-session__ordering-item--correct_elovc_284","practice-session__ordering-item-number":"_practice-session__ordering-item-number_elovc_289","practice-session__ordering-item-text":"_practice-session__ordering-item-text_elovc_295","practice-session__ordering-word":"_practice-session__ordering-word_elovc_302","practice-session__ordering-hint":"_practice-session__ordering-hint_elovc_306","practice-session__ordering-controls":"_practice-session__ordering-controls_elovc_312","practice-session__ordering-btn":"_practice-session__ordering-btn_elovc_317","practice-session__ordering-feedback":"_practice-session__ordering-feedback_elovc_325","practice-session__ordering-feedback-title":"_practice-session__ordering-feedback-title_elovc_332","practice-session__ordering-feedback-item":"_practice-session__ordering-feedback-item_elovc_339","practice-session__matching-container":"_practice-session__matching-container_elovc_347","practice-session__matching-instruction":"_practice-session__matching-instruction_elovc_352","practice-session__matching-grid":"_practice-session__matching-grid_elovc_358","practice-session__matching-left-item":"_practice-session__matching-left-item_elovc_364","practice-session__matching-feedback":"_practice-session__matching-feedback_elovc_375","practice-session__matching-feedback-title":"_practice-session__matching-feedback-title_elovc_382","practice-session__matching-feedback-item":"_practice-session__matching-feedback-item_elovc_389","practice-session__ms-container":"_practice-session__ms-container_elovc_397","practice-session__ms-instruction":"_practice-session__ms-instruction_elovc_402","practice-session__ms-options":"_practice-session__ms-options_elovc_408","practice-session__ms-option":"_practice-session__ms-option_elovc_408","practice-session__ms-option--focused":"_practice-session__ms-option--focused_elovc_425","practice-session__ms-option--selected":"_practice-session__ms-option--selected_elovc_430","practice-session__ms-option--correct":"_practice-session__ms-option--correct_elovc_435","practice-session__ms-option--incorrect":"_practice-session__ms-option--incorrect_elovc_440","practice-session__ms-option-label":"_practice-session__ms-option-label_elovc_445","practice-session__ms-status-icon":"_practice-session__ms-status-icon_elovc_450","practice-session__ms-status-icon--correct":"_practice-session__ms-status-icon--correct_elovc_456","practice-session__ms-status-icon--incorrect":"_practice-session__ms-status-icon--incorrect_elovc_460","practice-session__slider-container":"_practice-session__slider-container_elovc_466","practice-session__slider-value-display":"_practice-session__slider-value-display_elovc_474","practice-session__slider-value":"_practice-session__slider-value_elovc_474","practice-session__slider-value--correct":"_practice-session__slider-value--correct_elovc_484","practice-session__slider-value--incorrect":"_practice-session__slider-value--incorrect_elovc_488","practice-session__slider-wrapper":"_practice-session__slider-wrapper_elovc_492","practice-session__slider-feedback":"_practice-session__slider-feedback_elovc_496","practice-session__slider-feedback-text":"_practice-session__slider-feedback-text_elovc_503","practice-session__slider-correct-value":"_practice-session__slider-correct-value_elovc_509","practice-session__slider-tolerance":"_practice-session__slider-tolerance_elovc_514","practice-session__scramble-container":"_practice-session__scramble-container_elovc_521","practice-session__scramble-display":"_practice-session__scramble-display_elovc_529","practice-session__scramble-label":"_practice-session__scramble-label_elovc_536","practice-session__scramble-word":"_practice-session__scramble-word_elovc_542","practice-session__scramble-length":"_practice-session__scramble-length_elovc_550","practice-session__scramble-input-label":"_practice-session__scramble-input-label_elovc_556","practice-session__scramble-input":"_practice-session__scramble-input_elovc_556","practice-session__scramble-input--correct":"_practice-session__scramble-input--correct_elovc_575","practice-session__scramble-input--incorrect":"_practice-session__scramble-input--incorrect_elovc_580","practice-session__scramble-feedback":"_practice-session__scramble-feedback_elovc_585","practice-session__scramble-feedback-label":"_practice-session__scramble-feedback-label_elovc_592","practice-session__scramble-feedback-word":"_practice-session__scramble-feedback-word_elovc_599","practice-session__flashcard-container":"_practice-session__flashcard-container_elovc_607","practice-session__flashcard":"_practice-session__flashcard_elovc_607","practice-session__flashcard-lang":"_practice-session__flashcard-lang_elovc_635","practice-session__flashcard-front":"_practice-session__flashcard-front_elovc_643","practice-session__flashcard-reveal-btn":"_practice-session__flashcard-reveal-btn_elovc_656","practice-session__flashcard-divider":"_practice-session__flashcard-divider_elovc_674","practice-session__flashcard-back":"_practice-session__flashcard-back_elovc_681","practice-session__flashcard-assessment":"_practice-session__flashcard-assessment_elovc_694","practice-session__flashcard-btn":"_practice-session__flashcard-btn_elovc_702","practice-session__flashcard-btn--unknown":"_practice-session__flashcard-btn--unknown_elovc_716","practice-session__flashcard-btn--known":"_practice-session__flashcard-btn--known_elovc_727","practice-session__flashcard-icon":"_practice-session__flashcard-icon_elovc_738","practice-session__flashcard-explanation":"_practice-session__flashcard-explanation_elovc_742","practice-session__text-input-container":"_practice-session__text-input-container_elovc_755","practice-session__text-input-wrapper":"_practice-session__text-input-wrapper_elovc_763","practice-session__text-input":"_practice-session__text-input_elovc_755","practice-session__text-input-feedback":"_practice-session__text-input-feedback_elovc_775","practice-session__hint-controls":"_practice-session__hint-controls_elovc_796","practice-session__hint-button":"_practice-session__hint-button_elovc_802","practice-session__hint":"_practice-session__hint_elovc_796","practice-session__shortcuts-overlay":"_practice-session__shortcuts-overlay_elovc_826","practice-session__shortcuts-content":"_practice-session__shortcuts-content_elovc_837","practice-session__shortcuts-groups":"_practice-session__shortcuts-groups_elovc_852","practice-session__shortcuts-group-title":"_practice-session__shortcuts-group-title_elovc_857","practice-session__shortcuts-list":"_practice-session__shortcuts-list_elovc_862","practice-session__shortcut-item":"_practice-session__shortcut-item_elovc_870","practice-session__shortcut-keys":"_practice-session__shortcut-keys_elovc_877","practice-session__shortcuts-close":"_practice-session__shortcuts-close_elovc_885","practice-session__feedback":"_practice-session__feedback_elovc_935","practice-session__footer":"_practice-session__footer_elovc_942","practice-session__actions":"_practice-session__actions_elovc_949","practice-session__btn-submit":"_practice-session__btn-submit_elovc_955","practice-session__btn-submit--enabled":"_practice-session__btn-submit--enabled_elovc_964","practice-session__btn-submit--disabled":"_practice-session__btn-submit--disabled_elovc_969","practice-session__btn-skip":"_practice-session__btn-skip_elovc_974","practice-session__btn-next":"_practice-session__btn-next_elovc_985","practice-session__stats":"_practice-session__stats_elovc_998","practice-session__stat":"_practice-session__stat_elovc_998","practice-session__stat-value":"_practice-session__stat-value_elovc_1011","practice-session__stat-value--completed":"_practice-session__stat-value--completed_elovc_1016","practice-session__stat-value--correct":"_practice-session__stat-value--correct_elovc_1020","practice-session__stat-value--accuracy":"_practice-session__stat-value--accuracy_elovc_1024","practice-session__stat-label":"_practice-session__stat-label_elovc_1028","practice-session__loading":"_practice-session__loading_elovc_1035"};function ia({topicId:s,learningPathIds:e,targetCount:a=10,includeReview:i=!0,onComplete:o,onCancel:r}){const[c,h]=u.useState(null),[n,g]=u.useState(null),[x,L]=u.useState(0),[E,B]=u.useState(null),[_,Q]=u.useState(!1),[D,Z]=u.useState(!1),[ne,ie]=u.useState(Date.now()),[X,me]=u.useState([]),[Be,ke]=u.useState([]),[je,fe]=u.useState(0),[f,j]=u.useState([]),[I,G]=u.useState(null),[P,ee]=u.useState([]),[ce,Le]=u.useState({}),[Xe,Fe]=u.useState([]),[de,et]=u.useState(new Set),[Se,tt]=u.useState(0),[ue,st]=u.useState(""),[ge,at]=u.useState(!1),[Ae,Ne]=u.useState(null),[pe,lt]=u.useState(""),[Me,te]=u.useState(0),[Ue,$e]=u.useState(!1),[b,R]=u.useState(!1),[C,V]=u.useState(null),{playbackState:q,loadAudio:Ce,togglePlayPause:dt,replay:ut,stop:It,preloadNext:es,unlockAutoPlay:He}=Fs(),{settings:Ve}=qt(),bt=u.useCallback(p=>{_||n?.type!=="multiple-select"||et(d=>{const m=new Set(d);return m.has(p)?m.delete(p):m.add(p),m})},[_,n]),ts=u.useCallback(()=>{if(!n)return;const p=n.content,d=C?.buttons?.question?.field;if(n.audioUrl||d&&p?.[d]){try{He(),ut()}catch(S){console.warn("Audio replay failed",S)}Ce(n,Ve,!0).catch(S=>{console.warn("Audio reload failed",S)})}},[n,Ve,Ce,ut,He,C]),nt=u.useCallback(()=>{if(_)return!1;if(n?.type==="multiple-choice")return E!==null;if(n?.type==="cloze-deletion")return f.every(p=>p.trim().length>0);if(n?.type==="true-false")return I!==null;if(n?.type==="ordering")return P.length>0;if(n?.type==="matching"){const p=n.content;return Object.keys(ce).length===p.pairs.length}return n?.type==="multiple-select"?de.size>0:n?.type==="slider"?!0:n?.type==="word-scramble"?ue.trim().length>0:n?.type==="flashcard"?Ae!==null:n?.type==="text-input"?pe.trim().length>0:!1},[_,n,E,f,I,P,ce,de,ue,Ae,pe]),Te=u.useCallback(async p=>{if(!n||!c)return;q.autoPlayUnlocked||He().catch(y=>console.warn("Failed to unlock auto-play:",y));let d=!1;if(n.type==="multiple-choice"){if(E===null)return;d=E===je}else if(n.type==="cloze-deletion")d=n.content.blanks.every((T,re)=>{const $=f[re]?.trim().toLowerCase()||"",W=T.correctAnswer.toLowerCase(),Re=T.alternatives?.map(it=>it.toLowerCase())||[];return $===W||Re.includes($)});else if(n.type==="true-false"){if(I===null)return;const y=n.content;d=I===y.correctAnswer}else if(n.type==="ordering"){const y=n.content;d=P.every((T,re)=>{const $=y.items.indexOf(T);return y.correctOrder[re]===$})}else if(n.type==="matching")d=n.content.pairs.every((T,re)=>ce[re]===re);else if(n.type==="multiple-select"){const y=n.content;if(de.size===0)return;d=y.correctAnswers.length===de.size&&y.correctAnswers.every(T=>de.has(T))}else if(n.type==="slider"){const y=n.content,T=y.tolerance||0;d=Math.abs(Se-y.correctValue)<=T}else if(n.type==="word-scramble"){if(!ue.trim())return;const y=n.content;d=ue.trim().toLowerCase()===y.correctWord.toLowerCase()}else if(n.type==="flashcard"){const y=p??Ae;if(y==null)return;d=y,Ne(y)}else if(n.type==="text-input"){if(!pe.trim())return;const y=n.content,T=y.caseSensitive||!1,re=T?pe.trim():pe.trim().toLowerCase(),$=T?y.correctAnswer:y.correctAnswer.toLowerCase(),W=(y.alternatives||[]).map(Re=>T?Re:Re.toLowerCase());d=re===$||W.includes(re)}Z(d),Q(!0);const m=Math.round((Date.now()-ne)/1e3);await new xt(wt(),pt(),ht()).recordSessionAnswer(c.id,d,m);const w=new Cs(ht(),pt()),k=d?4:2;await w.recordAnswer(n.id,d,k);const v=await F.practiceSessions.get(c.id);v&&h(v)},[n,c,q.autoPlayUnlocked,He,E,je,f,I,P,ce,de,Se,ue,Ae,pe,ne]),yt=u.useCallback(async()=>{if(!c)return;if(c.execution.status==="completed"||c.execution.status==="abandoned"){o();return}await new xt(wt(),pt(),ht()).completeSession(c.id),await new Promise(d=>setTimeout(d,100)),o()},[c,o]),Ee=u.useCallback(()=>{Q(!1),B(null),c&&x<c.execution.taskIds.length-1?L(x+1):yt()},[c,x,yt]);u.useEffect(()=>{_s()},[]),u.useEffect(()=>{c&&c.execution.taskIds.length>0&&x===0&&Dt()},[c]),u.useEffect(()=>{c&&c.execution.taskIds.length>0&&x>0&&Dt()},[x]),u.useEffect(()=>{if(!n){te(0);return}if(n.type==="multiple-choice"){const p=X.length;te(d=>p===0?0:Math.min(d,p-1))}else if(n.type==="multiple-select"){const p=n.content.options.length;te(d=>p===0?0:Math.min(d,p-1))}else te(0)},[n,X]),u.useEffect(()=>{const p=d=>{if(!n)return;const m=document.activeElement,S=m?.tagName?.toLowerCase(),w=!!(m&&(S==="input"||S==="textarea"||m.isContentEditable)),k=d.key,v=n.type,y=()=>{n.content?.hint&&R(W=>!W)},T=$=>{if(v==="multiple-choice"){const W=X.length;if(W===0)return;te(Re=>{const it=(Re+$+W)%W;return B(it),it})}else if(v==="multiple-select"){const W=n.content.options;if(W.length===0)return;te(Re=>(Re+$+W.length)%W.length)}},re=()=>{if(v==="flashcard"){ge?Ae!==null&&Ee():at(!0);return}_?v!=="flashcard"&&Ee():nt()&&Te()};if((k==="?"||k==="/"&&d.shiftKey)&&!d.metaKey&&!d.ctrlKey){d.preventDefault(),$e($=>!$);return}if(Ue){(k==="Escape"||k==="?"||k==="/"&&d.shiftKey)&&(d.preventDefault(),$e(!1));return}if(/^[1-9]$/.test(k)&&!w){const $=Number(k)-1;if(v==="multiple-choice"&&$<X.length)d.preventDefault(),te($),B($);else if(v==="multiple-select"){const W=n.content.options;$<W.length&&(d.preventDefault(),te($),bt($))}else v==="true-false"?k==="1"?(d.preventDefault(),G(!0)):k==="2"&&(d.preventDefault(),G(!1)):v==="flashcard"&&ge&&!_&&(k==="1"?(d.preventDefault(),Ne(!1),Te(!1),setTimeout(()=>Ee(),300)):k==="2"&&(d.preventDefault(),Ne(!0),Te(!0),setTimeout(()=>Ee(),300)));return}switch(k){case"Escape":d.preventDefault(),Ue?$e(!1):b?R(!1):r();break;case"Enter":if(w)return;d.preventDefault(),re();break;case" ":{if(w)return;v==="multiple-choice"?(d.preventDefault(),B(Me)):v==="multiple-select"&&(d.preventDefault(),bt(Me));break}case"ArrowUp":case"ArrowLeft":if(w)return;(v==="multiple-choice"||v==="multiple-select")&&(d.preventDefault(),T(-1));break;case"ArrowDown":case"ArrowRight":if(w)return;(v==="multiple-choice"||v==="multiple-select")&&(d.preventDefault(),T(1));break;case"r":case"R":if(w)return;d.preventDefault(),ts();break;case"h":case"H":if(w)return;d.preventDefault(),y();break}};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[n,X,Me,_,ge,Ae,b,Ue,nt,Te,Ee,E,I,pe]),u.useEffect(()=>{const p=d=>{if(!(d.target instanceof HTMLInputElement||d.target instanceof HTMLTextAreaElement)&&q.audioUrl)switch(d.key.toLowerCase()){case" ":d.preventDefault(),dt().catch(console.error);break;case"r":d.preventDefault(),ut().catch(console.error);break;case"s":d.preventDefault(),It();break}};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[q.audioUrl,dt,ut,It]),u.useEffect(()=>{_&&n&&qs(n,Ve)&&(console.log("üîä Auto-play in feedback:",n.audioUrl),Ce(n,Ve,!0).catch(p=>{console.warn("Auto-play in feedback failed:",p)}))},[_,n?.id,Ve.autoPlayEnabled,Ve.languageFilter]),u.useEffect(()=>{if(!n||!C||_)return;const p=C.autoPlay?.onLoad||[],d=n.content;(async()=>{for(const S of p){const w=d[S];if(!w)continue;const k=Array.isArray(w)?w[0]:w;if(k)try{await new Audio(`/learning-platform/test/audio/${k}`).play(),console.log(`‚úÖ Auto-played ${S}: ${k}`);break}catch(v){console.warn(`‚ö†Ô∏è Auto-play blocked for ${S}. User interaction required first.`,v),q.autoPlayUnlocked||He().catch(y=>console.warn("Failed to unlock auto-play:",y))}}})()},[n?.id,C]),u.useEffect(()=>{_&&R(!1)},[_]),u.useEffect(()=>{if(!n||!C||!_||n.type==="flashcard"&&ge)return;const p=C.autoPlay?.onReveal||[],d=n.content,m=async()=>{for(const w of p){const k=[];if(w==="correctAnswerAudio"&&n.type==="multiple-choice")d.optionsAudio?.[d.correctAnswer]&&k.push(d.optionsAudio[d.correctAnswer]);else if(w==="correctAnswerAudio"&&n.type==="text-input")d.correctAnswerAudio&&k.push(d.correctAnswerAudio);else if(w==="itemsAudioInOrder"&&n.type==="ordering"){const v=d.itemsAudio,y=d.correctOrder;if(v&&y)for(const T of y)v[T]&&k.push(v[T])}else if(w==="blanksAudioInOrder"&&n.type==="cloze-deletion"){const v=d.blanks;if(v)for(const y of v)y.correctAnswerAudio&&k.push(y.correctAnswerAudio)}else if(w==="correctOptionsAudio"&&n.type==="multiple-select"){const v=d.optionsAudio,y=d.correctAnswers;if(v&&y)for(const T of y)v[T]&&k.push(v[T])}else if(w==="correctValueAudio"&&n.type==="slider")d.correctValueAudio&&k.push(d.correctValueAudio);else if(w==="correctWordAudio"&&n.type==="word-scramble")d.correctWordAudio&&k.push(d.correctWordAudio);else{const v=d[w];if(v){const y=Array.isArray(v)?v[0]:v;y&&k.push(y)}}if(k.length>0){for(const v of k)try{const y=new Audio(`/learning-platform/test/audio/${v}`);await y.play(),await new Promise(T=>{y.onended=T,setTimeout(T,5e3)}),console.log(`‚úÖ Auto-played on reveal ${w}: ${v}`)}catch(y){console.warn(`‚ö†Ô∏è Auto-play on reveal blocked for ${v}.`,y);break}break}}},S=setTimeout(()=>{m()},100);return()=>clearTimeout(S)},[_,n?.id,C,ge]);function ss(){return n?n.type==="multiple-choice"?as():n.type==="cloze-deletion"?ns():n.type==="true-false"?is():n.type==="ordering"?rs():n.type==="matching"?os():n.type==="multiple-select"?cs():n.type==="slider"?ls():n.type==="word-scramble"?ds():n.type==="flashcard"?us():n.type==="text-input"?ps():null:null}function as(){if(!n||n.type!=="multiple-choice")return null;const p=n.content;return t.jsx("div",{className:l["practice-session__mc-options"],children:X.map((d,m)=>{const S=!_&&Me===m,w=[l["practice-session__mc-option"],_&&m===je&&l["practice-session__mc-option--correct"],_&&m===E&&!D&&l["practice-session__mc-option--incorrect"],!_&&E===m&&l["practice-session__mc-option--selected"],S&&l["practice-session__mc-option--focused"],_&&l["practice-session__mc-option--disabled"]].filter(Boolean).join(" "),k=Be[m],v=p.optionsAudio&&k!==void 0&&p.optionsAudio[k]?`/learning-platform/test/audio/${p.optionsAudio[k]}`:null;return t.jsxs("button",{onClick:()=>{_||(te(m),B(m))},disabled:_,className:w,onMouseEnter:()=>te(m),children:[t.jsx("span",{children:d}),v&&t.jsx(xe,{text:d,audioUrl:v,size:"small"})]},m)})})}function ns(){if(!n||n.type!=="cloze-deletion")return null;const p=n.content,d=p.text.split(/\{\{blank\}\}/g);return t.jsxs("div",{className:l["practice-session__cloze-container"],children:[t.jsx("div",{className:l["practice-session__cloze-text"],children:d.map((m,S)=>t.jsxs("span",{children:[m,S<p.blanks.length&&(()=>{const w=f[S]?.trim().toLowerCase()||"",k=w===p.blanks[S].correctAnswer.toLowerCase()||p.blanks[S].alternatives?.map(y=>y.toLowerCase()).includes(w),v=f[S]?.trim()!=="";return t.jsx(Tt,{value:f[S]||"",onChange:y=>{const T=[...f];T[S]=y.target.value,j(T)},disabled:_,error:!!(_&&v&&!k),success:!!(_&&k),className:l["practice-session__cloze-input"]})})()]},S))}),_&&t.jsxs("div",{className:l["practice-session__cloze-feedback"],children:[t.jsx("div",{className:l["practice-session__cloze-feedback-title"],children:"Richtige Antworten:"}),p.blanks.map((m,S)=>{const w=f[S]?.trim().toLowerCase()||"",v=w===m.correctAnswer.toLowerCase()||m.alternatives?.map(y=>y.toLowerCase()).includes(w)?l["practice-session__cloze-answer--correct"]:l["practice-session__cloze-answer--neutral"];return t.jsxs("div",{className:`${l["practice-session__cloze-answer"]} ${v}`,children:["L√ºcke ",S+1,": ",t.jsx("strong",{className:l["practice-session__cloze-answer-correct"],children:m.correctAnswer}),m.alternatives&&m.alternatives.length>0&&t.jsxs("span",{className:l["practice-session__cloze-alternatives"],children:[" ","(auch richtig: ",m.alternatives.join(", "),")"]})]},S)})]})]})}function is(){if(!n||n.type!=="true-false")return null;const p=n.content;return t.jsxs("div",{className:l["practice-session__tf-container"],children:[t.jsx("div",{className:l["practice-session__tf-statement"],children:p.statement}),t.jsx("div",{className:l["practice-session__tf-buttons"],children:[!0,!1].map(d=>{const m=[l["practice-session__tf-button"],_&&d===p.correctAnswer&&l["practice-session__tf-button--correct"],_&&d===I&&!D&&l["practice-session__tf-button--incorrect"],!_&&I===d&&l["practice-session__tf-button--selected"],_&&l["practice-session__tf-button--disabled"]].filter(Boolean).join(" ");return t.jsx("button",{onClick:()=>!_&&G(d),disabled:_,className:m,children:d?"Richtig":"Falsch"},d.toString())})})]})}function rs(){if(!n||n.type!=="ordering")return null;const p=n.content;return t.jsxs("div",{className:l["practice-session__ordering-container"],children:[t.jsx("div",{className:l["practice-session__ordering-instruction"],children:"Ordne die Elemente in die richtige Reihenfolge"}),t.jsx("div",{className:l["practice-session__ordering-items"],children:P.map((d,m)=>{const S=p.items.indexOf(d),w=_&&p.correctOrder[m]===S,k=_?p.correctOrder.indexOf(S):-1,v=[l["practice-session__ordering-item"],_&&w&&l["practice-session__ordering-item--correct"]].filter(Boolean).join(" "),y=p.itemsAudio&&p.itemsAudio[S]?`/learning-platform/test/audio/${p.itemsAudio[S]}`:null;return t.jsxs("div",{className:v,children:[t.jsxs("div",{className:l["practice-session__ordering-item-number"],children:[m+1,"."]}),t.jsxs("div",{className:l["practice-session__ordering-item-text"],children:[t.jsx("span",{className:l["practice-session__ordering-word"],children:d}),y&&t.jsx(xe,{text:d,audioUrl:y,size:"small"}),_&&!w&&t.jsxs("span",{className:l["practice-session__ordering-hint"],children:["‚Üí Position ",k+1]})]}),!_&&t.jsxs("div",{className:l["practice-session__ordering-controls"],children:[m>0&&t.jsx("button",{onClick:()=>{const T=[...P];[T[m],T[m-1]]=[T[m-1],T[m]],ee(T)},className:l["practice-session__ordering-btn"],children:"‚Üë"}),m<P.length-1&&t.jsx("button",{onClick:()=>{const T=[...P];[T[m],T[m+1]]=[T[m+1],T[m]],ee(T)},className:l["practice-session__ordering-btn"],children:"‚Üì"})]})]},m)})}),_&&!D&&t.jsxs("div",{className:l["practice-session__ordering-feedback"],children:[t.jsx("div",{className:l["practice-session__ordering-feedback-title"],children:"Richtige Reihenfolge:"}),p.correctOrder.map((d,m)=>t.jsxs("div",{className:l["practice-session__ordering-feedback-item"],children:[m+1,". ",t.jsx("strong",{children:p.items[d]})]},m))]})]})}function os(){if(!n||n.type!=="matching")return null;const p=n.content;return t.jsxs("div",{className:l["practice-session__matching-container"],children:[t.jsx("div",{className:l["practice-session__matching-instruction"],children:"Ordne die passenden Paare zu"}),t.jsx("div",{className:l["practice-session__matching-grid"],children:p.pairs.map((d,m)=>{const S=_&&ce[m]===m,w=ce[m]!==void 0&&ce[m]!==null,k=p.leftAudio&&p.leftAudio[m]?`/learning-platform/test/audio/${p.leftAudio[m]}`:null;return t.jsxs(ae.Fragment,{children:[t.jsxs("div",{className:l["practice-session__matching-left-item"],children:[t.jsx("span",{children:d.left}),k&&t.jsx(xe,{text:d.left,audioUrl:k,size:"small"})]}),t.jsx(Kt,{value:ce[m]?.toString()??"",onChange:v=>{const y=parseInt(v);Le({...ce,[m]:y})},options:Xe.map(v=>({value:v.toString(),label:p.pairs[v].right})),disabled:_,placeholder:"W√§hle...",error:_&&w&&!S,success:_&&S,fullWidth:!0})]},m)})}),_&&!D&&t.jsxs("div",{className:l["practice-session__matching-feedback"],children:[t.jsx("div",{className:l["practice-session__matching-feedback-title"],children:"Richtige Zuordnungen:"}),p.pairs.map((d,m)=>t.jsxs("div",{className:l["practice-session__matching-feedback-item"],children:[t.jsx("strong",{children:d.left})," ‚Üí ",t.jsx("strong",{children:d.right})]},m))]})]})}function cs(){if(!n||n.type!=="multiple-select")return null;const p=n.content;return t.jsxs("div",{className:l["practice-session__ms-container"],children:[t.jsx("div",{className:l["practice-session__ms-instruction"],children:"W√§hle alle zutreffenden Antworten"}),t.jsx("div",{className:l["practice-session__ms-options"],children:p.options.map((d,m)=>{const S=de.has(m),w=p.correctAnswers.includes(m),k=!_&&Me===m;let v="";_&&(w?v=S?"‚úì":"‚óã":S&&!w&&(v="‚úó"));const y=[l["practice-session__ms-option"],k&&l["practice-session__ms-option--focused"],_&&w&&l["practice-session__ms-option--correct"],_&&S&&!w&&l["practice-session__ms-option--incorrect"],!_&&S&&l["practice-session__ms-option--selected"]].filter(Boolean).join(" "),T=w?l["practice-session__ms-status-icon--correct"]:l["practice-session__ms-status-icon--incorrect"];return t.jsxs("div",{className:y,onMouseEnter:()=>te(m),children:[t.jsx(Jt,{checked:S,onChange:()=>{bt(m),te(m)},disabled:_,label:t.jsx("span",{className:l["practice-session__ms-option-label"],children:d}),error:_&&S&&!w,success:_&&w&&S,style:{flex:1}}),_&&v&&t.jsx("span",{className:`${l["practice-session__ms-status-icon"]} ${T}`,children:v})]},m)})})]})}function ls(){if(!n||n.type!=="slider")return null;const p=n.content,d=p.step||1,m=p.tolerance||0,S=Math.abs(Se-p.correctValue)<=m,w=_?S?l["practice-session__slider-value--correct"]:l["practice-session__slider-value--incorrect"]:"";return t.jsxs("div",{className:l["practice-session__slider-container"],children:[t.jsx("div",{className:l["practice-session__slider-value-display"],children:t.jsxs("div",{className:`${l["practice-session__slider-value"]} ${w}`,children:[Se,p.unit||""]})}),t.jsx("div",{className:l["practice-session__slider-wrapper"],children:t.jsx(Yt,{value:Se,onChange:tt,min:p.min,max:p.max,step:d,disabled:_,unit:p.unit||"",showValue:!1})}),_&&t.jsx("div",{className:l["practice-session__slider-feedback"],children:t.jsxs("div",{className:l["practice-session__slider-feedback-text"],children:["Richtige Antwort: ",t.jsxs("strong",{className:l["practice-session__slider-correct-value"],children:[p.correctValue,p.unit||""]}),m>0&&t.jsxs("span",{className:l["practice-session__slider-tolerance"],children:[" ","(¬±",m,")"]})]})})]})}function ds(){if(!n||n.type!=="word-scramble")return null;const p=n.content,d=ue.trim().toLowerCase()===p.correctWord.toLowerCase(),m=ue.trim()!=="",S=_?d?l["practice-session__scramble-input--correct"]:m?l["practice-session__scramble-input--incorrect"]:"":"";return t.jsxs("div",{className:l["practice-session__scramble-container"],children:[t.jsxs("div",{className:l["practice-session__scramble-display"],children:[t.jsx("div",{className:l["practice-session__scramble-label"],children:"Buchstabensalat:"}),t.jsx("div",{className:l["practice-session__scramble-word"],children:p.scrambledWord}),p.showLength&&t.jsxs("div",{className:l["practice-session__scramble-length"],children:["(",p.correctWord.length," Buchstaben)"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:l["practice-session__scramble-input-label"],children:"Deine L√∂sung:"}),t.jsx("input",{type:"text",value:ue,onChange:w=>st(w.target.value),disabled:_,placeholder:"Entschl√ºssle das Wort...",className:`${l["practice-session__scramble-input"]} ${S}`})]}),_&&!D&&t.jsxs("div",{className:l["practice-session__scramble-feedback"],children:[t.jsx("div",{className:l["practice-session__scramble-feedback-label"],children:"Richtige L√∂sung:"}),t.jsx("div",{className:l["practice-session__scramble-feedback-word"],children:p.correctWord})]})]})}function us(){if(!n||n.type!=="flashcard")return null;const p=n.content;return t.jsxs("div",{className:l["practice-session__flashcard-container"],children:[t.jsxs("div",{className:l["practice-session__flashcard"],children:[t.jsx("div",{className:l["practice-session__flashcard-lang"],children:p.frontLanguage==="de"?"Deutsch":p.frontLanguage==="es"?"Espa√±ol":"English"}),t.jsxs("div",{className:l["practice-session__flashcard-front"],children:[t.jsx("div",{children:p.front}),C?.buttons?.front?.show&&p[C.buttons.front.field]&&t.jsx(xe,{text:p.front,audioUrl:`/learning-platform/test/audio/${p[C.buttons.front.field]}`,size:"large"})]}),ge?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:l["practice-session__flashcard-divider"]}),t.jsx("div",{className:l["practice-session__flashcard-lang"],children:p.backLanguage==="de"?"Deutsch":p.backLanguage==="es"?"Espa√±ol":"English"}),t.jsxs("div",{className:l["practice-session__flashcard-back"],children:[t.jsx("div",{children:p.back}),C?.buttons?.back?.show&&p[C.buttons.back.field]&&t.jsx(xe,{text:p.back,audioUrl:`/learning-platform/test/audio/${p[C.buttons.back.field]}`,size:"large"})]})]}):t.jsx("button",{onClick:async()=>{if(at(!0),C&&q.autoPlayUnlocked){const d=C.autoPlay?.onReveal||[];for(const m of d)if(p[m])try{await new Audio(`/learning-platform/test/audio/${p[m]}`).play();break}catch(S){console.warn(`Failed to auto-play ${m} on reveal:`,S)}}},disabled:_,className:l["practice-session__flashcard-reveal-btn"],children:"Ergebnis anzeigen"})]}),ge&&!_&&t.jsxs("div",{className:l["practice-session__flashcard-assessment"],children:[t.jsxs("button",{onClick:()=>{Ne(!1),Te(!1),setTimeout(()=>{Ee()},300)},className:`${l["practice-session__flashcard-btn"]} ${l["practice-session__flashcard-btn--unknown"]}`,children:[t.jsx("span",{className:l["practice-session__flashcard-icon"],children:"‚úó"}),t.jsx("span",{children:"Nicht gewusst"})]}),t.jsxs("button",{onClick:()=>{Ne(!0),Te(!0),setTimeout(()=>{Ee()},300)},className:`${l["practice-session__flashcard-btn"]} ${l["practice-session__flashcard-btn--known"]}`,children:[t.jsx("span",{className:l["practice-session__flashcard-icon"],children:"‚úì"}),t.jsx("span",{children:"Gewusst"})]})]}),_&&p.explanation&&t.jsxs("div",{className:l["practice-session__flashcard-explanation"],children:[t.jsx("strong",{children:"Hinweis:"})," ",p.explanation]})]})}function ps(){if(!n||n.type!=="text-input")return null;const p=n.content,d=p.correctAnswerAudio?`/learning-platform/test/audio/${p.correctAnswerAudio}`:n.audioUrl;return t.jsx("div",{className:l["practice-session__text-input-container"],children:t.jsxs("div",{className:l["practice-session__text-input-wrapper"],children:[t.jsx(Tt,{value:pe,onChange:m=>lt(m.target.value),onKeyDown:m=>{m.key==="Enter"&&nt()&&!_&&Te()},disabled:_,placeholder:"Deine Antwort...",error:_&&!D,success:_&&D,fullWidth:!0,className:l["practice-session__text-input"]}),_&&!D&&t.jsxs("div",{className:l["practice-session__text-input-feedback"],children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Richtige Antwort:"})," ",p.correctAnswer]}),d&&t.jsx(xe,{text:p.correctAnswer,audioUrl:d,size:"small"})]})]})})}if(!c||!n)return t.jsx("div",{className:l["practice-session__loading"],children:t.jsx("p",{children:"Wird geladen..."})});const hs=(x+1)/c.execution.taskIds.length*100,vt=n.content?.hint;async function _s(){const d=await new xt(wt(),pt(),ht()).createSession({topicId:s,learningPathIds:e,targetCount:a,includeReview:i});h(d)}async function Dt(){if(!c||x>=c.execution.taskIds.length)return;const p=c.execution.taskIds[x];if(!p)return;const d=await F.tasks.get(p);if(!d)return;g(d),ie(Date.now());const m=await Gs(d.templateId);V(m);const S=x+1;if(S<c.execution.taskIds.length){const w=c.execution.taskIds[S];w&&F.tasks.get(w).then(k=>{k&&k.audioUrl&&es(k)}).catch(k=>{console.warn("Failed to preload next task audio:",k)})}if(B(null),G(null),j([]),ee([]),Le({}),Fe([]),et(new Set),tt(0),st(""),at(!1),Ne(null),lt(""),te(0),$e(!1),R(!1),d.type==="multiple-choice"){const w=d.content,k=[...w.options],v=w.correctAnswer,y=k.map(($,W)=>W);for(let $=y.length-1;$>0;$--){const W=Math.floor(Math.random()*($+1));[y[$],y[W]]=[y[W],y[$]]}const T=y.map($=>k[$]),re=y.findIndex($=>$===v);me(T),ke(y),fe(re)}else if(d.type==="cloze-deletion"){const w=d.content;j(new Array(w.blanks.length).fill(""))}else if(d.type==="ordering"){const k=[...d.content.items].sort(()=>Math.random()-.5);ee(k)}else if(d.type==="matching"){const k=d.content.pairs.map((v,y)=>y);for(let v=k.length-1;v>0;v--){const y=Math.floor(Math.random()*(v+1));[k[v],k[y]]=[k[y],k[v]]}Fe(k),Le({})}else if(d.type==="multiple-select")et(new Set);else if(d.type==="slider"){const w=d.content;tt(Math.floor((w.min+w.max)/2))}else d.type==="word-scramble"&&st("")}function ms(){c&&(Q(!1),B(null),x<c.execution.taskIds.length-1&&L(x+1))}const fs=()=>{q.autoPlayUnlocked||He().catch(p=>console.warn("Failed to unlock auto-play on click:",p))};return t.jsxs("div",{className:l["practice-session"],onClick:fs,children:[t.jsxs("div",{className:l["practice-session__header"],children:[t.jsxs("div",{className:l["practice-session__header-top"],children:[t.jsxs("div",{className:l["practice-session__header-left"],children:[t.jsx("h2",{className:l["practice-session__title"],children:"√úbungssitzung"}),t.jsxs("span",{className:l["practice-session__task-counter"],children:[x+1,"/",c.execution.taskIds.length]}),t.jsxs("span",{className:l["practice-session__task-id"],children:["ID: ",n.id]})]}),t.jsx("button",{onClick:r,className:l["practice-session__cancel-btn"],children:"Abbrechen"})]}),t.jsx("div",{className:l["practice-session__progress-bar"],children:t.jsx("div",{className:l["practice-session__progress-fill"],style:{width:`${hs}%`}})})]}),t.jsxs("div",{className:l["practice-session__question-area"],children:[(n.type==="multiple-choice"||n.type==="ordering"||n.type==="matching"||n.type==="multiple-select"||n.type==="slider"||n.type==="word-scramble"||n.type==="text-input")&&t.jsxs("div",{className:l["practice-session__question-header"],children:[t.jsx("h3",{className:l["practice-session__question-text"],children:n.content.question}),C?.buttons?.question?.show&&n.content[C.buttons.question.field]&&t.jsx(xe,{text:n.content.question,audioUrl:`/learning-platform/test/audio/${n.content[C.buttons.question.field]}`,size:"small"})]}),vt&&!_&&t.jsx("div",{className:l["practice-session__hint-controls"],children:t.jsxs("button",{type:"button",className:l["practice-session__hint-button"],onClick:()=>R(p=>!p),children:[b?"Hinweis verbergen":"Hinweis anzeigen"," (H)"]})}),vt&&b&&!_&&t.jsxs("div",{className:l["practice-session__hint"],children:["üí° ",t.jsx("strong",{children:"Hinweis:"})," ",vt]}),ss()]}),_&&t.jsx("div",{className:l["practice-session__feedback"],children:t.jsxs(Gt,{variant:D?"success":"error",title:D?"Richtig!":"Nicht ganz richtig",children:[n.content.explanation&&t.jsx("p",{style:{margin:0},children:n.content.explanation}),n.audioUrl&&n.type==="multiple-choice"&&t.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsx("span",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)"},children:"Aussprache:"}),t.jsx(xe,{text:n.content.options[n.content.correctAnswer],audioUrl:n.audioUrl,size:"small"})]})]})}),t.jsxs("div",{className:l["practice-session__footer"],children:[t.jsx("div",{className:l["practice-session__actions"],children:_?n?.type!=="flashcard"&&t.jsx("button",{onClick:Ee,className:l["practice-session__btn-next"],children:x<c.execution.taskIds.length-1?"N√§chste Aufgabe ‚Üí":"Sitzung beenden"}):t.jsxs(t.Fragment,{children:[n?.type!=="flashcard"&&t.jsx("button",{onClick:()=>Te(),disabled:!nt(),className:nt()?`${l["practice-session__btn-submit"]} ${l["practice-session__btn-submit--enabled"]}`:`${l["practice-session__btn-submit"]} ${l["practice-session__btn-submit--disabled"]}`,children:"Antwort √ºberpr√ºfen"}),t.jsx("button",{onClick:x<c.execution.taskIds.length-1?ms:yt,className:l["practice-session__btn-skip"],children:x<c.execution.taskIds.length-1?"√úberspringen ‚Üí":"Sitzung beenden"})]})}),t.jsxs("div",{className:l["practice-session__stats"],children:[t.jsxs("div",{className:l["practice-session__stat"],children:[t.jsx("div",{className:`${l["practice-session__stat-value"]} ${l["practice-session__stat-value--completed"]}`,children:c.execution.completedCount}),t.jsx("div",{className:l["practice-session__stat-label"],children:"beantwortet"})]}),t.jsxs("div",{className:l["practice-session__stat"],children:[t.jsx("div",{className:`${l["practice-session__stat-value"]} ${l["practice-session__stat-value--correct"]}`,children:c.execution.correctCount}),t.jsx("div",{className:l["practice-session__stat-label"],children:"richtig"})]}),t.jsxs("div",{className:l["practice-session__stat"],children:[t.jsxs("div",{className:`${l["practice-session__stat-value"]} ${l["practice-session__stat-value--accuracy"]}`,children:[c.execution.completedCount>0?Math.round(c.execution.correctCount/c.execution.completedCount*100):0,"%"]}),t.jsx("div",{className:l["practice-session__stat-label"],children:"genau"})]})]})]}),Ue&&t.jsx("div",{className:l["practice-session__shortcuts-overlay"],role:"dialog","aria-modal":"true","aria-labelledby":"practice-shortcuts-title",children:t.jsxs("div",{className:l["practice-session__shortcuts-content"],children:[t.jsx("h2",{id:"practice-shortcuts-title",children:"Tastaturk√ºrzel"}),t.jsxs("div",{className:l["practice-session__shortcuts-groups"],children:[t.jsxs("div",{children:[t.jsx("div",{className:l["practice-session__shortcuts-group-title"],children:"Navigation"}),t.jsxs("ul",{className:l["practice-session__shortcuts-list"],children:[t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Escape"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"Esc"})]}),t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Zur n√§chsten/vorherigen Option"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"‚Üê ‚Üë ‚Üí ‚Üì"})]}),t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Option w√§hlen / Checkbox umschalten"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"Leertaste"})]}),t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Option direkt w√§hlen"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"1‚Äì9"})]})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:l["practice-session__shortcuts-group-title"],children:"Aktionen"}),t.jsxs("ul",{className:l["practice-session__shortcuts-list"],children:[t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Antwort √ºberpr√ºfen / weiter"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"Enter"})]}),t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Frage erneut abspielen"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"R"})]}),t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Hinweis anzeigen (falls vorhanden)"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"H"})]}),t.jsxs("li",{className:l["practice-session__shortcut-item"],children:[t.jsx("span",{children:"Hilfe umschalten"}),t.jsx("span",{className:l["practice-session__shortcut-keys"],children:"?"})]})]})]})]}),t.jsx("div",{className:l["practice-session__shortcuts-close"],children:t.jsx("button",{type:"button",onClick:()=>$e(!1),children:"Schlie√üen (Esc)"})})]})})]})}const We={"stat-card__container":"_stat-card__container_jhf3g_4","stat-card__header":"_stat-card__header_jhf3g_11","stat-card__title":"_stat-card__title_jhf3g_18","stat-card__icon":"_stat-card__icon_jhf3g_28","stat-card__value":"_stat-card__value_jhf3g_35","stat-card__subtitle":"_stat-card__subtitle_jhf3g_43"};function we({title:s,value:e,subtitle:a,color:i=H.primary[500],icon:o,className:r,style:c,...h}){return t.jsx(Pe,{...h,padding:"medium",shadow:!0,border:!0,style:{borderLeft:`4px solid ${i}`,...c},className:r,children:t.jsxs("div",{className:We["stat-card__container"],children:[t.jsxs("div",{className:We["stat-card__header"],children:[t.jsx("h3",{className:We["stat-card__title"],children:s}),o&&t.jsx("div",{className:We["stat-card__icon"],style:{color:i},children:o})]}),t.jsx("div",{className:We["stat-card__value"],children:e}),a&&t.jsx("div",{className:We["stat-card__subtitle"],children:a})]})})}const ra="_button_1pgvq_4",oa="_button__icon_1pgvq_115",ca="_button__spinner_1pgvq_130",la="_spin_1pgvq_1",De={button:ra,"button--loading":"_button--loading_1pgvq_21","button--full-width":"_button--full-width_1pgvq_27","button--primary":"_button--primary_1pgvq_32","button--secondary":"_button--secondary_1pgvq_47","button--ghost":"_button--ghost_1pgvq_62","button--danger":"_button--danger_1pgvq_79","button--small":"_button--small_1pgvq_94","button--medium":"_button--medium_1pgvq_101","button--large":"_button--large_1pgvq_108",button__icon:oa,button__spinner:ca,spin:la};function ot({variant:s="primary",size:e="medium",loading:a=!1,fullWidth:i=!1,disabled:o=!1,startIcon:r,endIcon:c,children:h,className:n,...g}){return t.jsx("button",{...g,disabled:o||a,className:U(De.button,De[`button--${s}`],De[`button--${e}`],a&&De["button--loading"],i&&De["button--full-width"],n),children:a?t.jsxs(t.Fragment,{children:[t.jsx(da,{size:e}),h]}):t.jsxs(t.Fragment,{children:[r&&t.jsx("span",{className:De.button__icon,children:r}),h,c&&t.jsx("span",{className:De.button__icon,children:c})]})})}function da({size:s}){const e=s==="small"?"12px":s==="large"?"18px":"16px";return t.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:De.button__spinner,children:[t.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"31.4 31.4",opacity:"0.25"}),t.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})]})}const oe={"session-results":"_session-results_p4d1d_4","session-results__header":"_session-results__header_p4d1d_12","session-results__emoji":"_session-results__emoji_p4d1d_16","session-results__title":"_session-results__title_p4d1d_21","session-results__rating":"_session-results__rating_p4d1d_25","session-results__stats":"_session-results__stats_p4d1d_32","session-results__time-card":"_session-results__time-card_p4d1d_40","session-results__time-text":"_session-results__time-text_p4d1d_45","session-results__progress-card":"_session-results__progress-card_p4d1d_51","session-results__progress-title":"_session-results__progress-title_p4d1d_55","session-results__progress-text":"_session-results__progress-text_p4d1d_59","session-results__actions":"_session-results__actions_p4d1d_82"};function ua({session:s,onClose:e,onStartNew:a}){const i=s.results.accuracy,o=Math.round(s.results.averageTime);let r="",c="";i>=90?(r="Ausgezeichnet!",c="var(--color-success)"):i>=75?(r="Sehr gut!",c="var(--color-primary)"):i>=60?(r="Gut gemacht!",c="var(--color-warning)"):(r="Weiter √ºben!",c="var(--color-error)");function h(n){const g=Math.floor(n/60),x=n%60;return g>0?`${g}:${x.toString().padStart(2,"0")} min`:`${x} sek`}return t.jsxs("div",{className:oe["session-results"],children:[t.jsxs("div",{className:oe["session-results__header"],children:[t.jsx("div",{className:oe["session-results__emoji"],children:"üéâ"}),t.jsx("h1",{className:oe["session-results__title"],children:"Sitzung abgeschlossen!"}),t.jsx("p",{className:oe["session-results__rating"],style:{color:c},children:r})]}),t.jsxs("div",{className:oe["session-results__stats"],children:[t.jsx(we,{title:"Aufgaben bearbeitet",value:s.execution.completedCount,color:"var(--color-primary)"}),t.jsx(we,{title:"Richtige Antworten",value:s.execution.correctCount,color:"var(--color-success)"}),t.jsx(we,{title:"Genauigkeit",value:`${Math.round(i)}%`,color:c}),t.jsx(we,{title:"√ò Zeit pro Aufgabe",value:h(o),color:"var(--color-warning)"})]}),t.jsx(Pe,{padding:"medium",className:oe["session-results__time-card"],children:t.jsxs("p",{className:oe["session-results__time-text"],children:[t.jsx("strong",{children:"Gesamtzeit:"})," ",h(s.execution.totalTimeSpent)]})}),t.jsxs(Pe,{padding:"large",className:oe["session-results__progress-card"],children:[t.jsx("h3",{className:oe["session-results__progress-title"],children:"üìà Dein Fortschritt"}),t.jsxs("p",{className:oe["session-results__progress-text"],children:[i>=90&&"Hervorragende Leistung! Du beherrschst dieses Thema sehr gut.",i>=75&&i<90&&"Sehr gute Arbeit! Du machst gro√üe Fortschritte.",i>=60&&i<75&&"Gute Arbeit! Weiter so, du verbesserst dich stetig.",i<60&&"Bleib dran! √úbung macht den Meister. Die n√§chste Sitzung wird noch besser!"]})]}),t.jsxs("div",{className:oe["session-results__actions"],children:[t.jsx(ot,{onClick:a,variant:"primary",children:"Neue Sitzung starten"}),t.jsx(ot,{onClick:e,variant:"secondary",children:"Zur√ºck zur √úbersicht"})]})]})}const Ge={"mastery-bar":"_mastery-bar_csvhg_4","mastery-bar__header":"_mastery-bar__header_csvhg_9","mastery-bar__label":"_mastery-bar__label_csvhg_16","mastery-bar__count":"_mastery-bar__count_csvhg_22","mastery-bar__track":"_mastery-bar__track_csvhg_28","mastery-bar__fill":"_mastery-bar__fill_csvhg_36"};function mt({label:s,count:e,color:a,max:i}){const o=i&&i>0?e/i*100:e>0?100:0;return t.jsxs("div",{className:Ge["mastery-bar"],children:[t.jsxs("div",{className:Ge["mastery-bar__header"],children:[t.jsx("span",{className:Ge["mastery-bar__label"],children:s}),t.jsx("span",{className:Ge["mastery-bar__count"],children:e})]}),t.jsx("div",{className:Ge["mastery-bar__track"],children:t.jsx("div",{className:Ge["mastery-bar__fill"],style:{background:a,width:`${o}%`}})})]})}const pa="_dashboard_1oze0_4",ha="_dashboard__empty_1oze0_12",_a="_dashboard__header_1oze0_22",ma="_dashboard__title_1oze0_26",fa="_dashboard__subtitle_1oze0_30",ga="_dashboard__metrics_1oze0_36",M={dashboard:pa,dashboard__empty:ha,"dashboard__back-button":"_dashboard__back-button_1oze0_17",dashboard__header:_a,dashboard__title:ma,dashboard__subtitle:fa,dashboard__metrics:ga,"dashboard__mastery-card":"_dashboard__mastery-card_1oze0_44","dashboard__mastery-title":"_dashboard__mastery-title_1oze0_48","dashboard__mastery-bars":"_dashboard__mastery-bars_1oze0_52","dashboard__topic-card":"_dashboard__topic-card_1oze0_59","dashboard__topic-title":"_dashboard__topic-title_1oze0_63","dashboard__topic-grid":"_dashboard__topic-grid_1oze0_67","dashboard__topic-item":"_dashboard__topic-item_1oze0_75","dashboard__topic-header":"_dashboard__topic-header_1oze0_79","dashboard__topic-name":"_dashboard__topic-name_1oze0_85","dashboard__topic-meta":"_dashboard__topic-meta_1oze0_89","dashboard__topic-bar-container":"_dashboard__topic-bar-container_1oze0_94","dashboard__topic-bar-fill":"_dashboard__topic-bar-fill_1oze0_101","dashboard__topic-stats":"_dashboard__topic-stats_1oze0_106","dashboard__sessions-title":"_dashboard__sessions-title_1oze0_113","dashboard__sessions-list":"_dashboard__sessions-list_1oze0_117","dashboard__session-item":"_dashboard__session-item_1oze0_125","dashboard__session-left":"_dashboard__session-left_1oze0_134","dashboard__session-topic":"_dashboard__session-topic_1oze0_138","dashboard__session-date":"_dashboard__session-date_1oze0_142","dashboard__session-right":"_dashboard__session-right_1oze0_147","dashboard__session-accuracy":"_dashboard__session-accuracy_1oze0_151","dashboard__session-stats":"_dashboard__session-stats_1oze0_155"};function ba({onClose:s}){const[e,a]=u.useState(null),[i,o]=u.useState(!0);u.useEffect(()=>{r()},[]);async function r(){try{const n=await F.practiceSessions.toArray(),g=n.filter(f=>f.execution.status==="completed"),x=await F.topics.toArray(),L=new Map(x.map(f=>[f.id,f])),E=await F.spacedRepetition.toArray(),B=g.reduce((f,j)=>f+(j.execution?.completedCount||0),0),_=g.reduce((f,j)=>f+(j.execution?.correctCount||0),0),Q=B>0?_/B*100:0,D=g.reduce((f,j)=>j.execution.startedAt&&j.execution.completedAt?f+(new Date(j.execution.completedAt).getTime()-new Date(j.execution.startedAt).getTime())/1e3:f,0),Z=g.length>0?D/g.length:0,ne=new Map;for(const f of g){const j=f.configuration.topicId;ne.has(j)||ne.set(j,{sessions:0,correct:0,total:0});const I=ne.get(j);I.sessions++,I.correct+=f.execution?.correctCount||0,I.total+=f.execution?.completedCount||0}const ie=Array.from(ne.entries()).map(([f,j])=>({topicId:f,topicName:L.get(f)?.title||f,sessionsCompleted:j.sessions,accuracy:j.total>0?j.correct/j.total*100:0,tasksReviewed:j.total})),X=new Date,me=E.filter(f=>f.algorithm.efactor>=2.5).length,Be=E.filter(f=>f.algorithm.efactor<2.5&&f.algorithm.repetition>0).length,ke=E.filter(f=>f.algorithm.repetition===0).length,je=E.filter(f=>new Date(f.schedule.nextReview)<=X).length,fe=g.sort((f,j)=>{const I=f.execution.completedAt?new Date(f.execution.completedAt).getTime():0;return(j.execution.completedAt?new Date(j.execution.completedAt).getTime():0)-I}).slice(0,5);a({totalSessions:n.length,completedSessions:g.length,totalQuestions:B,correctAnswers:_,accuracyRate:Q,averageSessionTime:Z,currentStreak:0,totalStudyTime:D,topicProgress:ie,recentSessions:fe,upcomingReviews:je,masteryLevels:{mastered:me,learning:Be,new:ke}})}catch(n){console.error("Failed to load dashboard stats:",n)}finally{o(!1)}}function c(n){const g=Math.floor(n/3600),x=Math.floor(n%3600/60);return g>0?`${g}h ${x}m`:`${x}m`}function h(n){return(typeof n=="string"?new Date(n):n).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}return i?t.jsxs("div",{className:M.dashboard__empty,style:{textAlign:"center"},children:[t.jsx("h1",{children:"üìä Dashboard"}),t.jsx("p",{children:"Lade Statistiken..."})]}):e?t.jsxs("div",{className:M.dashboard,children:[t.jsxs("div",{className:M.dashboard__header,children:[t.jsx(ot,{variant:"secondary",onClick:s,className:M["dashboard__back-button"],children:"‚Üê Zur√ºck"}),t.jsx("h1",{className:M.dashboard__title,children:"üìä Lern-Dashboard"}),t.jsx("p",{className:M.dashboard__subtitle,children:"Deine Fortschritte und Statistiken im √úberblick"})]}),t.jsxs("div",{className:M.dashboard__metrics,children:[t.jsx(we,{title:"Gesamt Sitzungen",value:e.completedSessions.toString(),subtitle:`von ${e.totalSessions} gestartet`,color:H.primary[500]}),t.jsx(we,{title:"Genauigkeit",value:`${Math.round(e.accuracyRate)}%`,subtitle:`${e.correctAnswers}/${e.totalQuestions} richtig`,color:H.success[500]}),t.jsx(we,{title:"Lernzeit",value:c(e.totalStudyTime),subtitle:`√ò ${c(e.averageSessionTime)} pro Sitzung`,color:H.warning[500]}),t.jsx(we,{title:"Anstehende Wiederholungen",value:e.upcomingReviews.toString(),subtitle:"bereit zum √úben",color:H.info[500]})]}),t.jsxs(Pe,{padding:"medium",className:M["dashboard__mastery-card"],children:[t.jsx("h2",{className:M["dashboard__mastery-title"],children:"üéØ Beherrschungsniveau"}),t.jsxs("div",{className:M["dashboard__mastery-bars"],children:[t.jsx(mt,{label:"Gemeistert",count:e.masteryLevels.mastered,color:H.success[500]}),t.jsx(mt,{label:"In Arbeit",count:e.masteryLevels.learning,color:H.warning[500]}),t.jsx(mt,{label:"Neu",count:e.masteryLevels.new,color:H.primary[500]})]})]}),e.topicProgress.length>0&&t.jsxs(Pe,{padding:"medium",className:M["dashboard__topic-card"],children:[t.jsx("h2",{className:M["dashboard__topic-title"],children:"üìö Fortschritt nach Thema"}),t.jsx("div",{className:M["dashboard__topic-grid"],children:e.topicProgress.map(n=>t.jsxs("div",{className:M["dashboard__topic-item"],children:[t.jsxs("div",{className:M["dashboard__topic-header"],children:[t.jsx("span",{className:M["dashboard__topic-name"],children:n.topicName}),t.jsxs("span",{className:M["dashboard__topic-meta"],children:[n.sessionsCompleted," Sitzungen ‚Ä¢ ",Math.round(n.accuracy),"% genau"]})]}),t.jsx("div",{className:M["dashboard__topic-bar-container"],children:t.jsx("div",{className:M["dashboard__topic-bar-fill"],style:{background:n.accuracy>=75?H.success[500]:n.accuracy>=50?H.warning[500]:H.error[500],width:`${n.accuracy}%`}})}),t.jsxs("div",{className:M["dashboard__topic-stats"],children:[n.tasksReviewed," Aufgaben bearbeitet"]})]},n.topicId))})]}),e.recentSessions.length>0&&t.jsxs(Pe,{padding:"medium",children:[t.jsx("h2",{className:M["dashboard__sessions-title"],children:"üïê Letzte Sitzungen"}),t.jsx("div",{className:M["dashboard__sessions-list"],children:e.recentSessions.map(n=>t.jsxs("div",{className:M["dashboard__session-item"],children:[t.jsxs("div",{className:M["dashboard__session-left"],children:[t.jsx("div",{className:M["dashboard__session-topic"],children:n.configuration.topicId}),t.jsx("div",{className:M["dashboard__session-date"],children:n.execution.completedAt&&h(n.execution.completedAt)})]}),t.jsxs("div",{className:M["dashboard__session-right"],children:[t.jsxs("div",{className:M["dashboard__session-accuracy"],style:{color:n.results.accuracy>=75?H.success[500]:H.warning[500]},children:[Math.round(n.results.accuracy),"%"]}),t.jsxs("div",{className:M["dashboard__session-stats"],children:[n.execution.correctCount,"/",n.execution.completedCount]})]})]},n.id))})]})]}):t.jsxs("div",{className:M.dashboard__empty,children:[t.jsx(ot,{variant:"secondary",onClick:s,className:M["dashboard__back-button"],children:"‚Üê Zur√ºck"}),t.jsx("h1",{children:"üìä Dashboard"}),t.jsx("p",{children:"Keine Daten verf√ºgbar."})]})}const Qt=({topic:s,onSelect:e,className:a,disabled:i=!1,"data-testid":o})=>{const[r,c]=ae.useState(!1),h={padding:"2rem",background:"var(--color-bg-secondary)",borderRadius:"12px",cursor:i?"not-allowed":"pointer",transition:"transform 0.2s, box-shadow 0.2s",border:"2px solid transparent",borderColor:r?"var(--color-primary)":"transparent",transform:r&&!i?"translateY(-4px)":"translateY(0)",boxShadow:r&&!i?"var(--shadow-lg)":"none",opacity:i?.5:1},n=`Thema ${s.name} √∂ffnen - ${s.description}`;return t.jsxs("button",{type:"button",onClick:()=>e(s.id),className:a,"data-testid":o,style:h,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),disabled:i,"aria-label":n,children:[s.icon&&t.jsx("span",{"aria-hidden":"true",style:{fontSize:"48px",display:"block",marginBottom:"16px"},children:s.icon}),t.jsx("h3",{style:{fontSize:"20px",fontWeight:600,marginBottom:"8px",color:"var(--color-text-primary)"},children:s.name}),t.jsx("p",{style:{fontSize:"14px",color:"var(--color-text-secondary)",lineHeight:1.5,margin:0},children:s.description})]})};function Zt(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone??"Europe/Berlin"}catch{return"Europe/Berlin"}}const N={version:1,theme:{mode:"system",fontScale:"medium",animationsEnabled:!0,reducedMotion:!1},audio:{autoPlayEnabled:!0,autoPlayRepeats:1,autoPlayDelayMs:1e3,soundEffectsEnabled:!0,soundEffectsVolume:.8,successChimeEnabled:!0,playbackRate:1},learning:{algorithm:"fsrs",dailyGoal:20,sessionSize:10,repeatDifficultTasks:!0,randomizeOrder:!0},notifications:{dailyReminderEnabled:!1,dailyReminderTime:"18:00",dailyReminderMessage:"Zeit zum Lernen! üìö",streakWarningEnabled:!0,weeklyReportEnabled:!1},interaction:{vibrationsEnabled:!0,vibrationOnCorrect:!0,vibrationOnIncorrect:!0,vibrationOnSessionComplete:!1,confettiEnabled:!0,confettiStyle:"standard",confettiIntensity:"medium",wakeLockEnabled:!0,keyboardShortcutsEnabled:!0},ai:{explanationsEnabled:!1,explanationDepth:"medium",includeExamples:!0,showLearningTips:!0,trainingOptIn:!1,dailyUsageLimit:20,usageToday:0},privacy:{dataStorageMode:"local",analyticsEnabled:!1,errorReportsEnabled:!1,betaFeaturesEnabled:!1},language:{interfaceLanguage:"de",timezone:Zt(),dateFormat:"DD.MM.YYYY"},database:{lastUpdatedAt:null,storageUsageBytes:null},lastSavedAt:null};function Ze(s,e,a){return Number.isNaN(s)?e:Math.min(a,Math.max(e,s))}function ya(s){return s==="light"||s==="dark"||s==="system"}function va(s){return s==="small"||s==="medium"||s==="large"||s==="x-large"}function xa(s){return s===.5||s===.75||s===1||s===1.25||s===1.5}function wa(s){return s==="sm-2"||s==="fsrs"||s==="neural"}function ka(s){return s==="standard"||s==="firework"||s==="emoji"}function ja(s){return s==="light"||s==="medium"||s==="strong"}function Sa(s){return s==="short"||s==="medium"||s==="detailed"}function Aa(s){return s==="local"||s==="cloud"}function Na(s){return s==="de"||s==="en"||s==="es"}function Ca(s){return s==="DD.MM.YYYY"||s==="MM/DD/YYYY"||s==="YYYY-MM-DD"}function Ta(s){return{mode:ya(s?.mode)?s.mode:N.theme.mode,fontScale:va(s?.fontScale)?s.fontScale:N.theme.fontScale,animationsEnabled:!!(s?.animationsEnabled??N.theme.animationsEnabled),reducedMotion:!!(s?.reducedMotion??N.theme.reducedMotion)}}function Ea(s){const e=s?.autoPlayRepeats,a=e===2||e===3?e:1,i=Ze(Number(s?.autoPlayDelayMs??N.audio.autoPlayDelayMs),0,5e3),o=Ze(Number(s?.soundEffectsVolume??N.audio.soundEffectsVolume),0,1);return{autoPlayEnabled:!!(s?.autoPlayEnabled??N.audio.autoPlayEnabled),autoPlayRepeats:a,autoPlayDelayMs:i,soundEffectsEnabled:!!(s?.soundEffectsEnabled??N.audio.soundEffectsEnabled),soundEffectsVolume:o,successChimeEnabled:!!(s?.successChimeEnabled??N.audio.successChimeEnabled),playbackRate:xa(s?.playbackRate)?s.playbackRate:N.audio.playbackRate}}function Ra(s){const e=Ze(Number(s?.dailyGoal??N.learning.dailyGoal),1,200),a=Ze(Number(s?.sessionSize??N.learning.sessionSize),1,100);return{algorithm:wa(s?.algorithm)?s.algorithm:N.learning.algorithm,dailyGoal:e,sessionSize:a,repeatDifficultTasks:!!(s?.repeatDifficultTasks??N.learning.repeatDifficultTasks),randomizeOrder:!!(s?.randomizeOrder??N.learning.randomizeOrder)}}function Ia(s){const e=typeof s?.dailyReminderTime=="string"&&/^\d{2}:\d{2}$/.test(s.dailyReminderTime)?s.dailyReminderTime:N.notifications.dailyReminderTime,a=typeof s?.dailyReminderMessage=="string"&&s.dailyReminderMessage.length<=120?s.dailyReminderMessage:N.notifications.dailyReminderMessage;return{dailyReminderEnabled:!!(s?.dailyReminderEnabled??N.notifications.dailyReminderEnabled),dailyReminderTime:e,dailyReminderMessage:a,streakWarningEnabled:!!(s?.streakWarningEnabled??N.notifications.streakWarningEnabled),weeklyReportEnabled:!!(s?.weeklyReportEnabled??N.notifications.weeklyReportEnabled)}}function Da(s){return{vibrationsEnabled:!!(s?.vibrationsEnabled??N.interaction.vibrationsEnabled),vibrationOnCorrect:!!(s?.vibrationOnCorrect??N.interaction.vibrationOnCorrect),vibrationOnIncorrect:!!(s?.vibrationOnIncorrect??N.interaction.vibrationOnIncorrect),vibrationOnSessionComplete:!!(s?.vibrationOnSessionComplete??N.interaction.vibrationOnSessionComplete),confettiEnabled:!!(s?.confettiEnabled??N.interaction.confettiEnabled),confettiStyle:ka(s?.confettiStyle)?s.confettiStyle:N.interaction.confettiStyle,confettiIntensity:ja(s?.confettiIntensity)?s.confettiIntensity:N.interaction.confettiIntensity,wakeLockEnabled:!!(s?.wakeLockEnabled??N.interaction.wakeLockEnabled),keyboardShortcutsEnabled:!!(s?.keyboardShortcutsEnabled??N.interaction.keyboardShortcutsEnabled)}}function Pa(s){const e=Ze(Number(s?.dailyUsageLimit??N.ai.dailyUsageLimit),0,9999),a=Ze(Number(s?.usageToday??N.ai.usageToday),0,e);return{explanationsEnabled:!!(s?.explanationsEnabled??N.ai.explanationsEnabled),explanationDepth:Sa(s?.explanationDepth)?s.explanationDepth:N.ai.explanationDepth,includeExamples:!!(s?.includeExamples??N.ai.includeExamples),showLearningTips:!!(s?.showLearningTips??N.ai.showLearningTips),trainingOptIn:!!(s?.trainingOptIn??N.ai.trainingOptIn),dailyUsageLimit:e,usageToday:a}}function Ba(s){return{dataStorageMode:Aa(s?.dataStorageMode)?s.dataStorageMode:N.privacy.dataStorageMode,analyticsEnabled:!!(s?.analyticsEnabled??N.privacy.analyticsEnabled),errorReportsEnabled:!!(s?.errorReportsEnabled??N.privacy.errorReportsEnabled),betaFeaturesEnabled:!!(s?.betaFeaturesEnabled??N.privacy.betaFeaturesEnabled)}}function La(s){return{interfaceLanguage:Na(s?.interfaceLanguage)?s.interfaceLanguage:N.language.interfaceLanguage,timezone:typeof s?.timezone=="string"&&s.timezone.length>0?s.timezone:Zt(),dateFormat:Ca(s?.dateFormat)?s.dateFormat:N.language.dateFormat}}function Ma(s){const e=typeof s?.lastUpdatedAt=="string"||s?.lastUpdatedAt===null?s.lastUpdatedAt:N.database.lastUpdatedAt,a=typeof s?.storageUsageBytes=="number"||s?.storageUsageBytes===null?s.storageUsageBytes:N.database.storageUsageBytes;return{lastUpdatedAt:e,storageUsageBytes:a}}function ft(s){if(!s||typeof s!="object")return{...N};const e=s,a=typeof e.version=="number"?e.version:N.version,i=typeof e.lastSavedAt=="string"||e.lastSavedAt===null?e.lastSavedAt:N.lastSavedAt;return{version:a,theme:Ta(e.theme),audio:Ea(e.audio),learning:Ra(e.learning),notifications:Ia(e.notifications),interaction:Da(e.interaction),ai:Pa(e.ai),privacy:Ba(e.privacy),language:La(e.language),database:Ma(e.database),lastSavedAt:i}}const Mt="mindforge.app-settings.v1";function $a(s){return s==="system"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":s}function za(s){if(typeof document>"u")return;const e={small:"15px",medium:"16px",large:"18px","x-large":"20px"};document.documentElement.style.fontSize=e[s]}function Oa(s){typeof document>"u"||document.documentElement.classList.toggle("reduced-motion",s)}function $t(s){if(typeof document>"u")return;const e=$a(s);document.documentElement.setAttribute("data-theme",e)}class Fa{currentSettings={...N};mediaQuery=null;constructor(){typeof window<"u"&&window.matchMedia&&(this.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),this.mediaQuery.addEventListener("change",this.handleSystemThemeChange))}load(){try{const e=localStorage.getItem(Mt);if(!e)return this.applySettings(N),this.currentSettings={...N},this.emitUpdate(),this.currentSettings;const a=ft(JSON.parse(e));return this.currentSettings=a,this.applySettings(a),this.emitUpdate(),a}catch(e){return console.warn("[Settings] Failed to load settings, resetting to defaults.",e),this.currentSettings={...N},this.persist(this.currentSettings),this.applySettings(this.currentSettings),this.emitUpdate(),this.currentSettings}}save(e){const a={...e,lastSavedAt:new Date().toISOString()};return this.currentSettings=a,this.persist(a),this.applySettings(a),this.emitUpdate(),a}update(e){const a=e(this.currentSettings);return this.save(ft(a))}reset(){const e={...N,lastSavedAt:new Date().toISOString()};return this.currentSettings=e,this.persist(e),this.applySettings(e),this.emitUpdate(),e}export(){const e={exportedAt:new Date().toISOString(),settings:this.currentSettings};return JSON.stringify(e,null,2)}import(e){try{const a=JSON.parse(e),i=a?.settings??a,o=ft(i);return this.save(o)}catch(a){throw console.error("[Settings] Failed to import settings",a),new Error("Ung√ºltige Einstellungsdatei.")}}async estimateStorageUsage(){if(navigator.storage?.estimate)try{const e=await navigator.storage.estimate();return{usage:e.usage??null,quota:e.quota??null}}catch(e){console.warn("[Settings] Failed to estimate storage usage",e)}return{usage:null,quota:null}}persist(e){localStorage.setItem(Mt,JSON.stringify(e))}applySettings(e){$t(e.theme.mode),za(e.theme.fontScale),Oa(e.theme.reducedMotion||!e.theme.animationsEnabled)}handleSystemThemeChange=()=>{this.currentSettings.theme.mode==="system"&&($t("system"),this.emitUpdate())};emitUpdate(){if(typeof window>"u")return;const e={settings:this.currentSettings};window.dispatchEvent(new CustomEvent("app:settings:updated",{detail:e}))}dispose(){this.mediaQuery&&this.mediaQuery.removeEventListener("change",this.handleSystemThemeChange)}getSettings(){return this.currentSettings}}const he=new Fa,Ua=2e3;function Ha(){const[s,e]=u.useState(null),[a,i]=u.useState(!0),[o,r]=u.useState("idle"),[c,h]=u.useState(null),n=u.useRef(null),g=u.useRef(null);u.useEffect(()=>{const D=he.load();return g.current=D,e(D),i(!1),he.estimateStorageUsage().then(Z=>{h(Z)}),()=>{n.current&&window.clearTimeout(n.current)}},[]);const x=u.useCallback(()=>{n.current&&window.clearTimeout(n.current),n.current=window.setTimeout(()=>{r("idle"),n.current=null},Ua)},[]),L=u.useCallback(D=>{if(!g.current)return;r("saving");const Z=typeof D=="function"?D(g.current):{...g.current,...D},ne=ft(Z),ie=he.save(ne);g.current=ie,e(ie),r("saved"),x()},[x]),E=u.useCallback(()=>{r("saving");const D=he.reset();g.current=D,e(D),r("saved"),x()},[x]),B=u.useCallback(()=>he.export(),[]),_=u.useCallback(D=>{r("saving");const Z=he.import(D);g.current=Z,e(Z),r("saved"),x()},[x]),Q=u.useCallback(async()=>{const D=await he.estimateStorageUsage();h(D)},[]);return{settings:s,loading:a,saveState:o,updateSettings:L,resetSettings:E,exportSettings:B,importSettingsFromText:_,storageEstimate:c,refreshStorageEstimate:Q}}const Va="_settingsPage_3a882_1",qa="_settingsHeader_3a882_34",Wa="_settingsTitle_3a882_42",Ga="_saveIndicator_3a882_53",Ja="_searchBar_3a882_62",Ka="_searchInput_3a882_67",Ya="_searchIcon_3a882_85",Qa="_presets_3a882_94",Za="_presetButton_3a882_101",Xa="_sections_3a882_117",en="_section_3a882_117",tn="_sectionHeader_3a882_130",sn="_sectionHeaderIcon_3a882_152",an="_sectionCaret_3a882_156",nn="_sectionContent_3a882_165",rn="_settingGroup_3a882_171",on="_settingItem_3a882_177",cn="_settingLabel_3a882_183",ln="_settingDescription_3a882_190",dn="_radioGroup_3a882_202",un="_toggleGroup_3a882_203",pn="_radioOption_3a882_217",hn="_buttonRow_3a882_246",_n="_dangerButton_3a882_253",mn="_infoCard_3a882_258",fn="_infoGrid_3a882_269",gn="_linkButton_3a882_280",bn="_footerActions_3a882_289",yn="_resetButton_3a882_297",vn="_closeButton_3a882_298",A={settingsPage:Va,settingsHeader:qa,settingsTitle:Wa,saveIndicator:Ga,"saveIndicator--saved":"_saveIndicator--saved_3a882_58",searchBar:Ja,searchInput:Ka,searchIcon:Ya,presets:Qa,presetButton:Za,sections:Xa,section:en,sectionHeader:tn,sectionHeaderIcon:sn,sectionCaret:an,"sectionCaret--collapsed":"_sectionCaret--collapsed_3a882_161",sectionContent:nn,settingGroup:rn,settingItem:on,settingLabel:cn,settingDescription:ln,radioGroup:dn,toggleGroup:un,radioOption:pn,"radioOption--active":"_radioOption--active_3a882_231",buttonRow:hn,dangerButton:_n,infoCard:mn,infoGrid:fn,linkButton:gn,footerActions:bn,resetButton:yn,closeButton:vn};function zt(s){if(s==null)return"‚Äì";if(s===0)return"0 B";const e=["B","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,a)).toFixed(1)} ${e[a]}`}function Ot(s){if(!s)return"Nie";try{const e=new Date(s);return new Intl.DateTimeFormat("de-DE",{dateStyle:"medium",timeStyle:"short"}).format(e)}catch{return s??""}}const Ft=[{id:"performance",label:"‚ö° Performance-Modus",apply:s=>({...s,theme:{...s.theme,animationsEnabled:!1,mode:"dark"},audio:{...s.audio,autoPlayEnabled:!1}})},{id:"accessibility",label:"‚ôø Barrierefreiheit",apply:s=>({...s,theme:{...s.theme,fontScale:"x-large",reducedMotion:!0,animationsEnabled:!1,mode:"light"}})},{id:"power-saver",label:"üîã Energiesparen",apply:s=>({...s,audio:{...s.audio,autoPlayEnabled:!1},theme:{...s.theme,animationsEnabled:!1}})}];function xn({onClose:s}){const{settings:e,loading:a,saveState:i,updateSettings:o,resetSettings:r,exportSettings:c,importSettingsFromText:h,storageEstimate:n,refreshStorageEstimate:g}=Ha(),{settings:x,updateSettings:L}=qt(),[E,B]=u.useState(""),_=u.useRef(null),[Q,D]=u.useState(null),Z=f=>{o(j=>({...j,theme:{...j.theme,mode:f}}))},ne=f=>{o(j=>({...j,theme:{...j.theme,fontScale:f}}))},ie=f=>{if(o(j=>({...j,audio:{...j.audio,...f}})),x){const j={};f.autoPlayEnabled!==void 0&&(j.autoPlayEnabled=f.autoPlayEnabled),Object.keys(j).length>0&&L(j)}},X=u.useCallback(f=>{o(j=>({...j,database:{...j.database,...f}}))},[o]);if(u.useEffect(()=>{const f=j=>{const I=j.detail;I?.lastUpdatedAt&&X({lastUpdatedAt:I.lastUpdatedAt}),typeof I?.storageUsageBytes=="number"&&X({storageUsageBytes:I.storageUsageBytes}),g()};return window.addEventListener("app:database:updated",f),()=>{window.removeEventListener("app:database:updated",f)}},[X,g]),a||!e)return t.jsx("div",{className:A.settingsPage,children:t.jsx("p",{children:"Lade Einstellungen..."})});const me=f=>{const j=Ft.find(I=>I.id===f);j&&o(()=>j.apply(e))},Be=()=>{const f=c(),j=new Blob([f],{type:"application/json"}),I=URL.createObjectURL(j),G=document.createElement("a");G.href=I,G.download=`mindforge-settings-${new Date().toISOString().slice(0,10)}.json`,G.click(),URL.revokeObjectURL(I)},ke=f=>{const j=f.target.files?.[0];if(!j)return;const I=new FileReader;I.onload=()=>{try{const G=typeof I.result=="string"?I.result:"";h(G),D(null)}catch(G){console.error(G),D("Import fehlgeschlagen. Bitte g√ºltige JSON-Datei ausw√§hlen.")}},I.onerror=()=>{D("Datei konnte nicht gelesen werden.")},I.readAsText(j),f.target.value=""},fe=(()=>{const f={id:"database",icon:"üì¶",title:"Datenbank & Speicherung",keywords:["datenbank","speicherung","backup","import","export","speicher"],content:t.jsxs("div",{className:A.settingGroup,children:[t.jsxs("div",{className:A.buttonRow,children:[t.jsx("button",{type:"button",onClick:()=>{confirm("Datenbank neu laden? Lernpfade werden aktualisiert.")&&window.dispatchEvent(new CustomEvent("app:database:reseed"))},children:"üîÑ Datenbank Aktualisieren"}),t.jsx("button",{type:"button",className:U(A.dangerButton),onClick:()=>{confirm("‚ö†Ô∏è Alle Daten l√∂schen? Dies kann nicht r√ºckg√§ngig gemacht werden!")&&window.dispatchEvent(new CustomEvent("app:database:reset"))},children:"üóëÔ∏è Alle Daten L√∂schen"}),t.jsx("button",{type:"button",onClick:Be,children:"üì• Daten Exportieren"}),t.jsx("button",{type:"button",onClick:()=>{_.current?.click()},children:"üì§ Daten Importieren"}),t.jsx("input",{ref:_,type:"file",accept:"application/json",style:{display:"none"},onChange:ke})]}),Q&&t.jsx("div",{className:A.infoCard,style:{borderColor:"#f97316",color:"#b45309"},children:Q}),t.jsxs("div",{className:A.infoCard,children:[t.jsxs("div",{className:A.infoGrid,children:[t.jsxs("div",{children:["üíæ Speichernutzung: ",zt(n?.usage??null)," / ",zt(n?.quota??null)]}),t.jsxs("div",{children:["üìÖ Letztes Update: ",Ot(e.database.lastUpdatedAt)]})]}),t.jsx("button",{type:"button",onClick:()=>{g()},children:"Speichernutzung aktualisieren"})]})]})},j={id:"theme",icon:"üé®",title:"Darstellung & Theme",keywords:["theme","dark","light","schrift","font","animation"],content:t.jsxs("div",{className:A.settingGroup,children:[t.jsxs("div",{className:A.settingItem,children:[t.jsx("div",{className:A.settingLabel,children:"Theme"}),t.jsx("div",{className:A.radioGroup,children:["light","dark","system"].map(P=>t.jsxs("label",{className:U(A.radioOption,e.theme.mode===P&&A["radioOption--active"]),children:[t.jsx("input",{type:"radio",checked:e.theme.mode===P,onChange:()=>Z(P)}),P==="light"?"Hell":P==="dark"?"Dunkel":"System"]},P))})]}),t.jsxs("div",{className:A.settingItem,children:[t.jsx("div",{className:A.settingLabel,children:"Schriftgr√∂√üe"}),t.jsx("div",{className:A.radioGroup,children:["small","medium","large","x-large"].map(P=>t.jsxs("label",{className:U(A.radioOption,e.theme.fontScale===P&&A["radioOption--active"]),children:[t.jsx("input",{type:"radio",checked:e.theme.fontScale===P,onChange:()=>ne(P)}),P==="small"?"Klein":P==="medium"?"Mittel":P==="large"?"Gro√ü":"Sehr gro√ü"]},P))})]}),t.jsxs("div",{className:A.toggleGroup,children:[t.jsxs("label",{className:A.radioOption,children:[t.jsx("input",{type:"checkbox",checked:e.theme.animationsEnabled,onChange:P=>o(ee=>({...ee,theme:{...ee.theme,animationsEnabled:P.target.checked}}))}),"Animationen aktivieren"]}),t.jsxs("label",{className:A.radioOption,children:[t.jsx("input",{type:"checkbox",checked:e.theme.reducedMotion,onChange:P=>o(ee=>({...ee,theme:{...ee.theme,reducedMotion:P.target.checked}}))}),"Reduzierte Bewegungen"]})]})]})},I={id:"audio",icon:"üîä",title:"Audio",keywords:["audio","autoplay","sound"],content:t.jsxs("div",{className:A.settingGroup,children:[t.jsxs("label",{className:A.radioOption,children:[t.jsx("input",{type:"checkbox",checked:e.audio.autoPlayEnabled,onChange:P=>ie({autoPlayEnabled:P.target.checked})}),"Audio automatisch abspielen (Spanisch)"]}),t.jsx("p",{className:A.settingDescription,children:"Steuert, ob Vokabelkarten automatisch die spanische Aussprache wiedergeben."})]})},G={id:"info",icon:"‚ÑπÔ∏è",title:"Info & Support",keywords:["hilfe","faq","bug","feature","support"],content:t.jsxs("div",{className:A.settingGroup,children:[t.jsxs("div",{className:A.infoCard,children:[t.jsx("div",{children:"Version: 1.0.0"}),t.jsxs("div",{children:["Letzte Aktualisierung: ",new Intl.DateTimeFormat("de-DE").format(new Date)]})]}),t.jsxs("div",{className:A.buttonRow,children:[t.jsx("a",{className:A.linkButton,href:"https://github.com/trsdn/learning-platform#readme",target:"_blank",rel:"noreferrer",children:"üìñ Dokumentation"}),t.jsx("a",{className:A.linkButton,href:"https://github.com/trsdn/learning-platform/issues/new",target:"_blank",rel:"noreferrer",children:"üêõ Bug melden"}),t.jsx("a",{className:A.linkButton,href:"https://github.com/trsdn/learning-platform/issues/new",target:"_blank",rel:"noreferrer",children:"üí° Feature vorschlagen"}),t.jsx("a",{className:A.linkButton,href:"https://github.com/trsdn/learning-platform/discussions",target:"_blank",rel:"noreferrer",children:"‚ùì Hilfe & FAQ"})]}),t.jsx("div",{className:A.settingDescription,children:"Entwickelt von @trsdn ¬∑ Open Source auf GitHub"})]})};return[f,j,I,G]})().filter(f=>E?`${f.title} ${f.keywords.join(" ")}`.toLowerCase().includes(E.toLowerCase()):!0);return t.jsxs("div",{className:A.settingsPage,children:[t.jsxs("header",{className:A.settingsHeader,children:[t.jsxs("div",{className:A.settingsTitle,children:[t.jsx("h1",{children:"‚öôÔ∏è Einstellungen"}),t.jsxs("div",{className:U(A.saveIndicator,i==="saved"&&A["saveIndicator--saved"]),children:[i==="saving"&&"Speichere...",i==="saved"&&"Gespeichert ‚úì",i==="idle"&&e.lastSavedAt&&`Zuletzt gespeichert: ${Ot(e.lastSavedAt)}`]})]}),t.jsx("button",{className:A.closeButton,type:"button",onClick:s,children:"Schlie√üen"})]}),t.jsxs("div",{className:A.searchBar,children:[t.jsx("span",{className:A.searchIcon,children:"üîç"}),t.jsx("input",{className:A.searchInput,type:"search",placeholder:"Einstellungen durchsuchen...",value:E,onChange:f=>B(f.target.value)})]}),t.jsx("div",{className:A.presets,children:Ft.map(f=>t.jsx("button",{type:"button",className:A.presetButton,onClick:()=>me(f.id),children:f.label},f.id))}),t.jsx("div",{className:A.sections,children:fe.map(f=>t.jsx(wn,{icon:f.icon,title:f.title,children:f.content},f.id))}),t.jsxs("footer",{className:A.footerActions,children:[t.jsx("button",{className:A.resetButton,type:"button",onClick:r,children:"Auf Standardwerte zur√ºcksetzen"}),t.jsx("button",{className:A.closeButton,type:"button",onClick:s,children:"Fertig"})]})]})}function wn({icon:s,title:e,children:a}){const[i,o]=u.useState(!0);return t.jsxs("section",{className:A.section,children:[t.jsxs("button",{type:"button",className:A.sectionHeader,onClick:()=>o(r=>!r),"aria-expanded":i,children:[t.jsxs("h2",{children:[t.jsx("span",{className:A.sectionHeaderIcon,children:s}),e]}),t.jsx("span",{className:U(A.sectionCaret,!i&&A["sectionCaret--collapsed"]),children:"‚ñº"})]}),i&&t.jsx("div",{className:A.sectionContent,children:a})]})}const kn="_componentDemo_s5wxj_2",jn="_demoHeader_s5wxj_12",Sn="_demoTitle_s5wxj_22",An="_demoDescription_s5wxj_29",Nn="_demoImport_s5wxj_36",Cn="_demoActions_s5wxj_47",Tn="_demoActionButton_s5wxj_53",En="_demoVariants_s5wxj_76",Rn="_variantDemo_s5wxj_82",In="_variantHeader_s5wxj_91",Dn="_variantToggle_s5wxj_95",Pn="_variantToggleIcon_s5wxj_117",Bn="_variantToggleIconExpanded_s5wxj_124",Ln="_variantName_s5wxj_128",Mn="_variantDescription_s5wxj_136",$n="_variantContent_s5wxj_142",zn="_variantPreview_s5wxj_151",On="_variantPreviewLabel_s5wxj_157",Fn="_variantPreviewBox_s5wxj_165",Un="_variantCode_s5wxj_177",Hn="_variantCodeToggle_s5wxj_183",Vn="_variantCodeBlock_s5wxj_206",qn="_variantProps_s5wxj_223",Wn="_variantPropsLabel_s5wxj_229",Gn="_variantPropsTable_s5wxj_237",Jn="_propType_s5wxj_278",O={componentDemo:kn,demoHeader:jn,demoTitle:Sn,demoDescription:An,demoImport:Nn,demoActions:Cn,demoActionButton:Tn,demoVariants:En,variantDemo:Rn,variantHeader:In,variantToggle:Dn,variantToggleIcon:Pn,variantToggleIconExpanded:Bn,variantName:Ln,variantDescription:Mn,variantContent:$n,variantPreview:zn,variantPreviewLabel:On,variantPreviewBox:Fn,variantCode:Un,variantCodeToggle:Hn,variantCodeBlock:Vn,variantProps:qn,variantPropsLabel:Wn,variantPropsTable:Gn,propType:Jn};function Kn({meta:s}){const[e,a]=u.useState(new Set(s.variants.map((c,h)=>h).filter(c=>s.variants[c]?.defaultVisible))),i=c=>{a(h=>{const n=new Set(h);return n.has(c)?n.delete(c):n.add(c),n})},o=()=>{a(new Set(s.variants.map((c,h)=>h)))},r=()=>{a(new Set)};return t.jsxs("div",{className:O.componentDemo,children:[t.jsxs("div",{className:O.demoHeader,children:[t.jsxs("div",{children:[t.jsx("h3",{className:O.demoTitle,children:s.name}),t.jsx("p",{className:O.demoDescription,children:s.description}),t.jsxs("code",{className:O.demoImport,children:["import ","{"," ",s.name," ","}"," from '",s.importPath,"';"]})]}),t.jsxs("div",{className:O.demoActions,children:[t.jsx("button",{onClick:o,className:O.demoActionButton,children:"Expand All"}),t.jsx("button",{onClick:r,className:O.demoActionButton,children:"Collapse All"})]})]}),t.jsx("div",{className:O.demoVariants,children:s.variants.map((c,h)=>{const n=e.has(h);return t.jsx(Yn,{variant:c,component:s.component,isExpanded:n,onToggle:()=>i(h)},h)})})]})}function Yn({variant:s,component:e,isExpanded:a,onToggle:i}){const[o,r]=u.useState(!1);return t.jsxs("div",{className:O.variantDemo,children:[t.jsx("div",{className:O.variantHeader,children:t.jsxs("button",{onClick:i,className:O.variantToggle,children:[t.jsx("span",{className:U(O.variantToggleIcon,a&&O.variantToggleIconExpanded),children:"‚ñ∂"}),t.jsx("span",{className:O.variantName,children:s.name}),t.jsx("span",{className:O.variantDescription,children:s.description})]})}),a&&t.jsxs("div",{className:O.variantContent,children:[t.jsxs("div",{className:O.variantPreview,children:[t.jsx("div",{className:O.variantPreviewLabel,children:"Preview"}),t.jsx("div",{className:O.variantPreviewBox,children:t.jsx(e,{...s.props})})]}),t.jsxs("div",{className:O.variantCode,children:[t.jsxs("button",{onClick:()=>r(!o),className:O.variantCodeToggle,children:[o?"‚ñº":"‚ñ∂"," ",o?"Hide":"Show"," Code"]}),o&&t.jsx("pre",{className:O.variantCodeBlock,children:t.jsx("code",{children:Qn(s)})})]}),Object.keys(s.props).length>0&&t.jsxs("div",{className:O.variantProps,children:[t.jsx("div",{className:O.variantPropsLabel,children:"Props"}),t.jsxs("table",{className:O.variantPropsTable,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Prop"}),t.jsx("th",{children:"Value"}),t.jsx("th",{children:"Type"})]})}),t.jsx("tbody",{children:Object.entries(s.props).map(([c,h])=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx("code",{children:c})}),t.jsx("td",{children:t.jsx("code",{children:Zn(h)})}),t.jsx("td",{children:t.jsx("code",{className:O.propType,children:typeof h})})]},c))})]})]})]})]})}function Qn(s){const e=Object.entries(s.props);if(e.length===0)return"<Component />";const a=e.map(([c,h])=>c==="children"?null:`  ${c}={${Xn(h)}}`).filter(Boolean).join(`
`),i=s.props.children;if(!(i!=null))return`<Component
${a}
/>`;const r=ei(i);return`<Component
${a}
>
  ${r}
</Component>`}function Zn(s){return s===null?"null":s===void 0?"undefined":typeof s=="string"?`"${s}"`:typeof s=="boolean"||typeof s=="number"?s.toString():typeof s=="function"?"() => {}":ae.isValidElement(s)?"<ReactElement>":Array.isArray(s)||typeof s=="object"?JSON.stringify(s,null,2):String(s)}function Xn(s){return s===null?"null":s===void 0?"undefined":typeof s=="string"?`"${s}"`:typeof s=="boolean"?`{${s}}`:typeof s=="number"?`{${s}}`:typeof s=="function"?"{() => {}}":ae.isValidElement(s)?"{<ReactElement />}":Array.isArray(s)?`{${JSON.stringify(s)}}`:typeof s=="object"?`{${JSON.stringify(s)}}`:`{${String(s)}}`}function ei(s){return typeof s=="string"?s:ae.isValidElement(s)?"<ReactElement />":String(s)}const Je={"icon-button":"_icon-button_1hb9w_4","icon-button--with-label":"_icon-button--with-label_1hb9w_21","icon-button--primary":"_icon-button--primary_1hb9w_33","icon-button--secondary":"_icon-button--secondary_1hb9w_48","icon-button--ghost":"_icon-button--ghost_1hb9w_63","icon-button--danger":"_icon-button--danger_1hb9w_78","icon-button--small":"_icon-button--small_1hb9w_93","icon-button--medium":"_icon-button--medium_1hb9w_100","icon-button--large":"_icon-button--large_1hb9w_107","icon-button__icon":"_icon-button__icon_1hb9w_114","icon-button__label":"_icon-button__label_1hb9w_121"};function ti({variant:s="ghost",size:e="medium",icon:a,label:i,showLabel:o=!1,disabled:r=!1,className:c,style:h,...n}){return t.jsxs("button",{...n,disabled:r,style:h,className:U(Je["icon-button"],Je[`icon-button--${s}`],Je[`icon-button--${e}`],o&&Je["icon-button--with-label"],c),title:i,"aria-label":i,children:[t.jsx("span",{className:Je["icon-button__icon"],children:a}),o&&i&&t.jsx("span",{className:Je["icon-button__label"],children:i})]})}const ct={button:{id:"button",name:"Button",description:"Primary action button with multiple variants, sizes, and states",category:"common",component:ot,importPath:"@ui/components/common/Button",variants:[{name:"Primary",description:"Default button variant for primary actions",props:{variant:"primary",children:"Primary Button"},defaultVisible:!0},{name:"Secondary",description:"Secondary actions with lower emphasis",props:{variant:"secondary",children:"Secondary Button"},defaultVisible:!0},{name:"Ghost",description:"Minimal button for tertiary actions",props:{variant:"ghost",children:"Ghost Button"},defaultVisible:!0},{name:"Danger",description:"Destructive actions like delete",props:{variant:"danger",children:"Delete"},defaultVisible:!0},{name:"Small Size",description:"Compact button for tight spaces",props:{size:"small",children:"Small Button"}},{name:"Large Size",description:"Prominent button for emphasis",props:{size:"large",children:"Large Button"}},{name:"Loading State",description:"Button with loading spinner",props:{loading:!0,children:"Loading..."},defaultVisible:!0},{name:"Disabled",description:"Disabled button state",props:{disabled:!0,children:"Disabled"}},{name:"Full Width",description:"Button that spans container width",props:{fullWidth:!0,children:"Full Width Button"}}]},card:{id:"card",name:"Card",description:"Versatile container component with consistent styling",category:"cards",component:Pe,importPath:"@ui/components/common/Card",variants:[{name:"Default",description:"Standard card with shadow and border",props:{children:ae.createElement("div",{},"Card content goes here")},defaultVisible:!0},{name:"No Shadow",description:"Card without shadow",props:{shadow:!1,children:ae.createElement("div",{},"No shadow card")}},{name:"No Border",description:"Card without border",props:{border:!1,children:ae.createElement("div",{},"No border card")}},{name:"Small Padding",description:"Compact card with minimal padding",props:{padding:"small",children:ae.createElement("div",{},"Small padding")}},{name:"Large Padding",description:"Spacious card with generous padding",props:{padding:"large",children:ae.createElement("div",{},"Large padding")},defaultVisible:!0}]},feedbackCard:{id:"feedbackCard",name:"FeedbackCard",description:"Displays feedback messages with success/error states",category:"feedback",component:Gt,importPath:"@ui/components/common/FeedbackCard",variants:[{name:"Success",description:"Green card for correct feedback",props:{variant:"success",title:"Richtig!",message:"Gut gemacht."},defaultVisible:!0},{name:"Error",description:"Red card for incorrect feedback",props:{variant:"error",title:"Falsch",message:"Nicht ganz richtig. Versuche es noch einmal!"},defaultVisible:!0},{name:"Warning",description:"Warning feedback message",props:{variant:"warning",title:"Achtung",message:"Bitte √ºberpr√ºfe deine Eingabe sorgf√§ltig."}},{name:"Info",description:"Informational message",props:{variant:"info",title:"Hinweis",message:"Die Photosynthese wandelt Lichtenergie in chemische Energie um."}}]},iconButton:{id:"iconButton",name:"IconButton",description:"Circular button for icon-only actions",category:"common",component:ti,importPath:"@ui/components/common/IconButton",variants:[{name:"Default",description:"Standard icon button",props:{"aria-label":"Close",children:"‚úï"},defaultVisible:!0},{name:"With Tooltip",description:"Icon button with title attribute",props:{"aria-label":"Settings",title:"Open settings",children:"‚öôÔ∏è"}}]},masteryBar:{id:"masteryBar",name:"MasteryBar",description:"Visual progress bar showing mastery level",category:"feedback",component:mt,importPath:"@ui/components/common/MasteryBar",variants:[{name:"Low Mastery (25%)",description:"Beginning stage",props:{mastery:.25},defaultVisible:!0},{name:"Medium Mastery (50%)",description:"Progressing",props:{mastery:.5},defaultVisible:!0},{name:"High Mastery (75%)",description:"Advanced",props:{mastery:.75},defaultVisible:!0},{name:"Complete Mastery (100%)",description:"Fully mastered",props:{mastery:1},defaultVisible:!0},{name:"Zero Progress",description:"Not started",props:{mastery:0}}]},statCard:{id:"statCard",name:"StatCard",description:"Displays a statistic with title and value",category:"cards",component:we,importPath:"@ui/components/common/StatCard",variants:[{name:"Tasks Completed",description:"Example task completion stat",props:{title:"Aufgaben abgeschlossen",value:127},defaultVisible:!0},{name:"Success Rate",description:"Percentage statistic",props:{title:"Erfolgsquote",value:"87%"},defaultVisible:!0},{name:"Study Streak",description:"Days counter",props:{title:"Lernstreak",value:"12 Tage"}}]},checkbox:{id:"checkbox",name:"Checkbox",description:"Interactive checkbox for selections",category:"forms",component:Jt,importPath:"@ui/components/forms/Checkbox",variants:[{name:"Unchecked",description:"Default unchecked state",props:{id:"demo-checkbox-1",checked:!1,onChange:()=>{},label:"Agree to terms"},defaultVisible:!0},{name:"Checked",description:"Checked state",props:{id:"demo-checkbox-2",checked:!0,onChange:()=>{},label:"Agree to terms"},defaultVisible:!0},{name:"Disabled",description:"Disabled checkbox",props:{id:"demo-checkbox-3",checked:!1,disabled:!0,onChange:()=>{},label:"Cannot change"}}]},input:{id:"input",name:"Input",description:"Text input field with validation states",category:"forms",component:Tt,importPath:"@ui/components/forms/Input",variants:[{name:"Default",description:"Standard text input",props:{value:"",onChange:()=>{},placeholder:"Enter text..."},defaultVisible:!0},{name:"With Value",description:"Input with text",props:{value:"Sample text",onChange:()=>{}},defaultVisible:!0},{name:"Error State",description:"Input showing validation error",props:{value:"Wrong answer",onChange:()=>{},error:!0,helperText:"This answer is incorrect"},defaultVisible:!0},{name:"Success State",description:"Input showing validation success",props:{value:"Correct answer",onChange:()=>{},success:!0,helperText:"Perfect!"},defaultVisible:!0},{name:"Full Width",description:"Input spanning container width",props:{value:"",onChange:()=>{},placeholder:"Full width input",fullWidth:!0}},{name:"Disabled",description:"Disabled input field",props:{value:"Cannot edit",onChange:()=>{},disabled:!0}}]},select:{id:"select",name:"Select",description:"Dropdown selection component",category:"forms",component:Kt,importPath:"@ui/components/forms/Select",variants:[{name:"Default",description:"Standard dropdown",props:{id:"demo-select-1",value:"",onChange:()=>{},options:[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"}]},defaultVisible:!0},{name:"With Selection",description:"Dropdown with selected value",props:{id:"demo-select-2",value:"option2",onChange:()=>{},options:[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"},{value:"option3",label:"Option 3"}]},defaultVisible:!0},{name:"Disabled",description:"Disabled dropdown",props:{id:"demo-select-3",value:"option1",disabled:!0,onChange:()=>{},options:[{value:"option1",label:"Option 1"},{value:"option2",label:"Option 2"}]}}]},slider:{id:"slider",name:"Slider",description:"Range slider for numeric input",category:"forms",component:Yt,importPath:"@ui/components/forms/Slider",variants:[{name:"Default (50%)",description:"Standard slider at middle position",props:{id:"demo-slider-1",value:50,onChange:()=>{},min:0,max:100},defaultVisible:!0},{name:"Low Value (25%)",description:"Slider at lower position",props:{id:"demo-slider-2",value:25,onChange:()=>{},min:0,max:100},defaultVisible:!0},{name:"High Value (75%)",description:"Slider at higher position",props:{id:"demo-slider-3",value:75,onChange:()=>{},min:0,max:100},defaultVisible:!0},{name:"With Labels",description:"Slider with min/max labels",props:{id:"demo-slider-4",value:50,onChange:()=>{},min:0,max:100,label:"Volume"}},{name:"Disabled",description:"Disabled slider",props:{id:"demo-slider-5",value:60,onChange:()=>{},min:0,max:100,disabled:!0}}]},topicCard:{id:"topicCard",name:"TopicCard",description:"Card displaying a learning topic with icon and metadata",category:"cards",component:Qt,importPath:"@ui/components/TopicCard",variants:[{name:"Math Topic",description:"Example mathematics topic",props:{topic:{id:"demo-math",name:"Mathematik",description:"Grundlegende mathematische Konzepte und Aufgaben",icon:"üî¢"},onSelect:()=>{}},defaultVisible:!0},{name:"Biology Topic",description:"Example biology topic",props:{topic:{id:"demo-biology",name:"Biologie",description:"Lerne √ºber Zellen, Genetik und √ñkosysteme",icon:"üß¨"},onSelect:()=>{}},defaultVisible:!0},{name:"Spanish Topic",description:"Example language topic",props:{topic:{id:"demo-spanish",name:"Spanisch",description:"Verbessere deine Spanischkenntnisse",icon:"üá™üá∏"},onSelect:()=>{}}}]},audioButton:{id:"audioButton",name:"AudioButton",description:"Button that plays audio pronunciation",category:"interactive",component:xe,importPath:"@ui/components/audio-button",variants:[{name:"With Audio",description:"Audio button with audioUrl",props:{text:"Hola",audioUrl:"https://example.com/audio/hola.mp3"},defaultVisible:!0},{name:"Without Audio",description:"Audio button without audioUrl (disabled state)",props:{text:"Buenos d√≠as"},defaultVisible:!0},{name:"Disabled",description:"Explicitly disabled audio button",props:{text:"Adi√≥s",audioUrl:"https://example.com/audio/adios.mp3",disabled:!0}}]}};function si(s){return Object.values(ct).filter(e=>e.category===s)}function ai(){const s=new Set(Object.values(ct).map(e=>e.category));return Array.from(s).sort()}function ni(s){const e=s.toLowerCase();return Object.values(ct).filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}const ii="_library_6vnn6_1",ri="_libraryHeader_6vnn6_9",oi="_libraryTitle_6vnn6_13",ci="_libraryDescription_6vnn6_20",li="_libraryControls_6vnn6_28",di="_searchBox_6vnn6_41",ui="_searchInput_6vnn6_46",pi="_searchClear_6vnn6_69",hi="_categoryFilter_6vnn6_99",_i="_categoryButton_6vnn6_105",mi="_categoryButtonActive_6vnn6_106",fi="_resultsInfo_6vnn6_141",gi="_resultsCount_6vnn6_145",bi="_noResults_6vnn6_151",yi="_componentList_6vnn6_163",J={library:ii,libraryHeader:ri,libraryTitle:oi,libraryDescription:ci,libraryControls:li,searchBox:di,searchInput:ui,searchClear:pi,categoryFilter:hi,categoryButton:_i,categoryButtonActive:mi,resultsInfo:fi,resultsCount:gi,noResults:bi,componentList:yi};function vi(){const[s,e]=u.useState(""),[a,i]=u.useState("all"),o=u.useMemo(()=>ai(),[]),r=u.useMemo(()=>{let h=Object.values(ct);return s.trim()&&(h=ni(s)),a!=="all"&&(h=h.filter(n=>n.category===a)),h.sort((n,g)=>n.name.localeCompare(g.name))},[s,a]),c=Object.keys(ct).length;return t.jsxs("div",{className:J.library,children:[t.jsx("div",{className:J.libraryHeader,children:t.jsxs("div",{children:[t.jsx("h2",{className:J.libraryTitle,children:"Component Library"}),t.jsxs("p",{className:J.libraryDescription,children:["Interactive showcase of all ",c," UI components with live previews and code examples"]})]})}),t.jsxs("div",{className:J.libraryControls,children:[t.jsxs("div",{className:J.searchBox,children:[t.jsx("input",{type:"text",placeholder:"Search components...",value:s,onChange:h=>e(h.target.value),className:J.searchInput}),s&&t.jsx("button",{onClick:()=>e(""),className:J.searchClear,"aria-label":"Clear search",children:"‚úï"})]}),t.jsxs("div",{className:J.categoryFilter,children:[t.jsxs("button",{onClick:()=>i("all"),className:a==="all"?J.categoryButtonActive:J.categoryButton,children:["All (",c,")"]}),o.map(h=>{const n=si(h).length;return t.jsxs("button",{onClick:()=>i(h),className:a===h?J.categoryButtonActive:J.categoryButton,children:[xi(h)," (",n,")"]},h)})]})]}),t.jsx("div",{className:J.resultsInfo,children:r.length===0?t.jsxs("p",{className:J.noResults,children:['No components found matching "',s,'"']}):t.jsxs("p",{className:J.resultsCount,children:["Showing ",r.length," of ",c," components"]})}),t.jsx("div",{className:J.componentList,children:r.map(h=>t.jsx(Kn,{meta:h},h.id))})]})}function xi(s){return s.charAt(0).toUpperCase()+s.slice(1)}const wi="_taskDemo_14ca3_2",ki="_demoHeader_14ca3_12",ji="_demoIcon_14ca3_20",Si="_demoHeaderContent_14ca3_25",Ai="_demoTitle_14ca3_29",Ni="_demoDescription_14ca3_36",Ci="_demoMeta_14ca3_43",Ti="_demoMetaItem_14ca3_49",Ei="_demoExamples_14ca3_64",Ri="_exampleDemo_14ca3_70",Ii="_exampleToggle_14ca3_79",Di="_exampleToggleIcon_14ca3_101",Pi="_exampleToggleIconExpanded_14ca3_108",Bi="_exampleNumber_14ca3_112",Li="_exampleTitle_14ca3_121",Mi="_exampleDescription_14ca3_129",$i="_exampleContent_14ca3_135",zi="_examplePreview_14ca3_144",Oi="_previewLabel_14ca3_150",Fi="_previewBox_14ca3_158",Ui="_dataPreview_14ca3_167",Hi="_dataRow_14ca3_173",Vi="_dataKey_14ca3_180",qi="_dataValue_14ca3_186",Wi="_exampleDataSection_14ca3_193",Gi="_exampleDataToggle_14ca3_199",Ji="_exampleDataBlock_14ca3_223",z={taskDemo:wi,demoHeader:ki,demoIcon:ji,demoHeaderContent:Si,demoTitle:Ai,demoDescription:Ni,demoMeta:Ci,demoMetaItem:Ti,demoExamples:Ei,exampleDemo:Ri,exampleToggle:Ii,exampleToggleIcon:Di,exampleToggleIconExpanded:Pi,exampleNumber:Bi,exampleTitle:Li,exampleDescription:Mi,exampleContent:$i,examplePreview:zi,previewLabel:Oi,previewBox:Fi,dataPreview:Ui,dataRow:Hi,dataKey:Vi,dataValue:qi,exampleDataSection:Wi,exampleDataToggle:Gi,exampleDataBlock:Ji};function Ki({meta:s}){const[e,a]=u.useState(new Set([0])),i=o=>{a(r=>{const c=new Set(r);return c.has(o)?c.delete(o):c.add(o),c})};return t.jsxs("div",{className:z.taskDemo,children:[t.jsxs("div",{className:z.demoHeader,children:[t.jsx("div",{className:z.demoIcon,children:s.icon}),t.jsxs("div",{className:z.demoHeaderContent,children:[t.jsx("h3",{className:z.demoTitle,children:s.name}),t.jsx("p",{className:z.demoDescription,children:s.description}),t.jsxs("div",{className:z.demoMeta,children:[t.jsxs("span",{className:z.demoMetaItem,children:["üìÅ Template: ",t.jsx("code",{children:s.templateFile})]}),t.jsxs("span",{className:z.demoMetaItem,children:["üéØ Difficulty: ",s.difficulty.join(", ")]}),t.jsxs("span",{className:z.demoMetaItem,children:["üìä ",s.exampleCount," examples"]})]})]})]}),t.jsx("div",{className:z.demoExamples,children:s.examples.map((o,r)=>t.jsx(Yi,{example:o,index:r,isExpanded:e.has(r),onToggle:()=>i(r)},r))})]})}function Yi({example:s,index:e,isExpanded:a,onToggle:i}){const[o,r]=u.useState(!1);return t.jsxs("div",{className:z.exampleDemo,children:[t.jsxs("button",{onClick:i,className:z.exampleToggle,children:[t.jsx("span",{className:U(z.exampleToggleIcon,a&&z.exampleToggleIconExpanded),children:"‚ñ∂"}),t.jsxs("span",{className:z.exampleNumber,children:["Example ",e+1]}),t.jsx("span",{className:z.exampleTitle,children:s.title}),t.jsx("span",{className:z.exampleDescription,children:s.description})]}),a&&t.jsxs("div",{className:z.exampleContent,children:[t.jsxs("div",{className:z.examplePreview,children:[t.jsx("div",{className:z.previewLabel,children:"Task Data Structure"}),t.jsx("div",{className:z.previewBox,children:Qi(s.data)})]}),t.jsxs("div",{className:z.exampleDataSection,children:[t.jsxs("button",{onClick:()=>r(!o),className:z.exampleDataToggle,children:[o?"‚ñº":"‚ñ∂"," ",o?"Hide":"Show"," Raw JSON Data"]}),o&&t.jsx("pre",{className:z.exampleDataBlock,children:t.jsx("code",{children:JSON.stringify(s.data,null,2)})})]})]})]})}function Qi(s){return t.jsx("div",{className:z.dataPreview,children:Object.entries(s).map(([e,a])=>t.jsxs("div",{className:z.dataRow,children:[t.jsxs("span",{className:z.dataKey,children:[e,":"]}),t.jsx("span",{className:z.dataValue,children:Xt(a)})]},e))})}function Xt(s){if(s===null)return"null";if(s===void 0)return"undefined";if(typeof s=="string")return`"${s}"`;if(typeof s=="boolean"||typeof s=="number")return s.toString();if(Array.isArray(s))return s.length===0?"[]":s.length<=3?`[${s.map(e=>Xt(e)).join(", ")}]`:`[${s.length} items]`;if(typeof s=="object"){const e=Object.keys(s);return e.length===0?"{}":e.length<=2?`{${e.join(", ")}}`:`{${e.length} properties}`}return String(s)}const Zi={flashcard:{id:"flashcard",name:"Flashcard",description:"Two-sided card with question on front, answer on back",icon:"üé¥",templateFile:"flashcard-basic.json",difficulty:["easy","medium"],exampleCount:2,examples:[{title:"German Vocabulary",description:"Basic word translation flashcard",data:{front:'Was bedeutet "Haus" auf Englisch?',back:"House",hint:"Es ist ein Geb√§ude"}},{title:"Math Formula",description:"Mathematical concept flashcard",data:{front:"Was ist die Formel f√ºr die Fl√§che eines Kreises?",back:"A = œÄr¬≤",hint:"Enth√§lt Pi und den Radius"}}]},"multiple-choice":{id:"multiple-choice",name:"Multiple Choice",description:"Question with 2-6 options, exactly one correct answer",icon:"üìù",templateFile:"multiple-choice-basic.json",difficulty:["easy","medium","hard"],exampleCount:3,examples:[{title:"Simple Math",description:"Basic arithmetic question",data:{question:"Was ist 2 + 2?",options:["3","4","5","6"],correctAnswer:1,explanation:"2 + 2 = 4",hint:"Z√§hle auf deinen Fingern"}},{title:"Biology",description:"Scientific knowledge question",data:{question:"Was ist das gr√∂√üte Organ des menschlichen K√∂rpers?",options:["Herz","Leber","Haut","Gehirn"],correctAnswer:2,explanation:"Die Haut ist das gr√∂√üte Organ und bedeckt den gesamten K√∂rper."}},{title:"History",description:"Historical fact question",data:{question:"In welchem Jahr fiel die Berliner Mauer?",options:["1987","1988","1989","1990"],correctAnswer:2,explanation:"Die Berliner Mauer fiel am 9. November 1989."}}]},"multiple-select":{id:"multiple-select",name:"Multiple Select",description:"Question with multiple correct answers to select",icon:"‚òëÔ∏è",templateFile:"multiple-select-basic.json",difficulty:["medium","hard"],exampleCount:2,examples:[{title:"Primary Colors",description:"Select all primary colors",data:{question:"Welche der folgenden Farben sind Prim√§rfarben?",options:["Rot","Gr√ºn","Blau","Gelb","Orange"],correctAnswers:[0,2,3],explanation:"Die Prim√§rfarben sind Rot, Blau und Gelb."}},{title:"Even Numbers",description:"Identify even numbers",data:{question:"Welche Zahlen sind gerade?",options:["2","3","4","5","6","7","8"],correctAnswers:[0,2,4,6],explanation:"Gerade Zahlen sind durch 2 teilbar ohne Rest."}}]},"true-false":{id:"true-false",name:"True/False",description:"Statement that must be judged as true or false",icon:"‚úì‚úó",templateFile:"true-false-basic.json",difficulty:["easy","medium"],exampleCount:2,examples:[{title:"Science Fact",description:"Verify scientific statement",data:{statement:"Wasser kocht bei 100¬∞C auf Meeresh√∂he.",correctAnswer:!0,explanation:"Bei normalem Luftdruck (auf Meeresh√∂he) kocht Wasser bei 100¬∞C."}},{title:"Geography",description:"Geographic fact verification",data:{statement:"Paris ist die Hauptstadt von Italien.",correctAnswer:!1,explanation:"Paris ist die Hauptstadt von Frankreich. Rom ist die Hauptstadt von Italien."}}]},"cloze-deletion":{id:"cloze-deletion",name:"Cloze Deletion",description:"Fill in the blank(s) in a sentence",icon:"üìÑ",templateFile:"cloze-deletion-basic.json",difficulty:["easy","medium","hard"],exampleCount:2,examples:[{title:"Grammar Practice",description:"Fill in missing verb",data:{text:"Ich ___ gerne Musik.",blanks:[{position:0,acceptedAnswers:["h√∂re","hoere"],caseSensitive:!1}],hint:"Verb in der ersten Person Singular"}},{title:"Science",description:"Complete scientific fact",data:{text:"Die ___ dreht sich um die ___.",blanks:[{position:0,acceptedAnswers:["Erde"],caseSensitive:!1},{position:1,acceptedAnswers:["Sonne"],caseSensitive:!1}]}}]},matching:{id:"matching",name:"Matching",description:"Match items from left column to right column",icon:"üîó",templateFile:"matching-basic.json",difficulty:["medium","hard"],exampleCount:2,examples:[{title:"Capitals",description:"Match countries to their capitals",data:{question:"Ordne die L√§nder ihren Hauptst√§dten zu:",pairs:[{left:"Deutschland",right:"Berlin"},{left:"Frankreich",right:"Paris"},{left:"Spanien",right:"Madrid"},{left:"Italien",right:"Rom"}]}},{title:"Animals",description:"Match animals to their sounds",data:{question:"Welches Tier macht welches Ger√§usch?",pairs:[{left:"Hund",right:"Bellt"},{left:"Katze",right:"Miaut"},{left:"Vogel",right:"Zwitschert"}]}}]},ordering:{id:"ordering",name:"Ordering",description:"Arrange items in correct order",icon:"üî¢",templateFile:"ordering-basic.json",difficulty:["medium","hard"],exampleCount:2,examples:[{title:"Months",description:"Order months chronologically",data:{question:"Ordne die Monate in der richtigen Reihenfolge:",items:["M√§rz","Januar","Februar","April"],correctOrder:[1,2,0,3]}},{title:"Historical Events",description:"Order events by date",data:{question:"Ordne die Ereignisse chronologisch:",items:["2. Weltkrieg endet","Berliner Mauer f√§llt","1. Weltkrieg beginnt","Deutsche Wiedervereinigung"],correctOrder:[2,0,1,3]}}]},slider:{id:"slider",name:"Slider",description:"Select a value on a continuous scale",icon:"üéöÔ∏è",templateFile:"slider-basic.json",difficulty:["easy","medium"],exampleCount:2,examples:[{title:"Temperature",description:"Estimate temperature value",data:{question:"Bei welcher Temperatur kocht Wasser?",min:0,max:200,correctValue:100,unit:"¬∞C",tolerance:5}},{title:"Percentage",description:"Estimate percentage value",data:{question:"Wie viel Prozent der Erdoberfl√§che sind mit Wasser bedeckt?",min:0,max:100,correctValue:71,unit:"%",tolerance:5}}]},"word-scramble":{id:"word-scramble",name:"Word Scramble",description:"Unscramble letters to form the correct word",icon:"üî§",templateFile:"word-scramble-basic.json",difficulty:["easy","medium"],exampleCount:2,examples:[{title:"German Word",description:"Unscramble to form German word",data:{scrambled:"SAUH",correctAnswer:"HAUS",hint:"Ein Geb√§ude, in dem Menschen wohnen"}},{title:"English Word",description:"Unscramble to form English word",data:{scrambled:"LPAPE",correctAnswer:"APPLE",hint:"A red or green fruit"}}]}};function Rt(){return Object.values(Zi)}function Xi(s){const e=s.toLowerCase();return Rt().filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}function er(s){return Rt().filter(e=>e.difficulty.includes(s))}const tr="_showcase_efpl7_1",sr="_showcaseHeader_efpl7_9",ar="_showcaseTitle_efpl7_13",nr="_showcaseDescription_efpl7_20",ir="_showcaseControls_efpl7_28",rr="_searchBox_efpl7_41",or="_searchInput_efpl7_46",cr="_searchClear_efpl7_69",lr="_difficultyFilter_efpl7_99",dr="_difficultyButton_efpl7_105",ur="_difficultyButtonActive_efpl7_106",pr="_resultsInfo_efpl7_141",hr="_resultsCount_efpl7_145",_r="_noResults_efpl7_151",mr="_taskList_efpl7_163",K={showcase:tr,showcaseHeader:sr,showcaseTitle:ar,showcaseDescription:nr,showcaseControls:ir,searchBox:rr,searchInput:or,searchClear:cr,difficultyFilter:lr,difficultyButton:dr,difficultyButtonActive:ur,resultsInfo:pr,resultsCount:hr,noResults:_r,taskList:mr};function fr(){const[s,e]=u.useState(""),[a,i]=u.useState("all"),o=u.useMemo(()=>Rt(),[]),r=u.useMemo(()=>{let n=o;return s.trim()&&(n=Xi(s)),a!=="all"&&(n=n.filter(g=>g.difficulty.includes(a))),n.sort((g,x)=>g.name.localeCompare(x.name))},[s,a,o]),c=o.length,h=o.reduce((n,g)=>n+g.exampleCount,0);return t.jsxs("div",{className:K.showcase,children:[t.jsx("div",{className:K.showcaseHeader,children:t.jsxs("div",{children:[t.jsx("h2",{className:K.showcaseTitle,children:"Task Types Showcase"}),t.jsxs("p",{className:K.showcaseDescription,children:["Interactive examples of all ",c," task types with ",h," sample tasks"]})]})}),t.jsxs("div",{className:K.showcaseControls,children:[t.jsxs("div",{className:K.searchBox,children:[t.jsx("input",{type:"text",placeholder:"Search task types...",value:s,onChange:n=>e(n.target.value),className:K.searchInput}),s&&t.jsx("button",{onClick:()=>e(""),className:K.searchClear,"aria-label":"Clear search",children:"‚úï"})]}),t.jsxs("div",{className:K.difficultyFilter,children:[t.jsxs("button",{onClick:()=>i("all"),className:a==="all"?K.difficultyButtonActive:K.difficultyButton,children:["All (",c,")"]}),["easy","medium","hard"].map(n=>{const g=er(n).length;return t.jsxs("button",{onClick:()=>i(n),className:a===n?K.difficultyButtonActive:K.difficultyButton,children:[n.charAt(0).toUpperCase()+n.slice(1)," (",g,")"]},n)})]})]}),t.jsx("div",{className:K.resultsInfo,children:r.length===0?t.jsxs("p",{className:K.noResults,children:['No task types found matching "',s,'"']}):t.jsxs("p",{className:K.resultsCount,children:["Showing ",r.length," of ",c," task types"]})}),t.jsx("div",{className:K.taskList,children:r.map(n=>t.jsx(Ki,{meta:n},n.id))})]})}const gr="_adminOverlay_6lc7y_2",br="_adminPanel_6lc7y_24",yr="_adminHeader_6lc7y_49",vr="_adminHeaderLeft_6lc7y_58",xr="_adminTitle_6lc7y_64",wr="_adminSubtitle_6lc7y_71",kr="_closeButton_6lc7y_77",jr="_warningBanner_6lc7y_103",Sr="_warningIcon_6lc7y_115",Ar="_adminTabs_6lc7y_121",Nr="_adminTab_6lc7y_121",Cr="_adminTabActive_6lc7y_153",Tr="_adminContent_6lc7y_160",Er="_adminTabPanel_6lc7y_166",Y={adminOverlay:gr,adminPanel:br,adminHeader:yr,adminHeaderLeft:vr,adminTitle:xr,adminSubtitle:wr,closeButton:kr,warningBanner:jr,warningIcon:Sr,adminTabs:Ar,adminTab:Nr,adminTabActive:Cr,adminContent:Tr,adminTabPanel:Er};function Rr({activeTab:s,onTabChange:e,onClose:a}){const i=u.useRef(null),o=u.useRef(null);u.useEffect(()=>{i.current?.focus()},[]),u.useEffect(()=>{const c=h=>{h.key==="Escape"&&(h.preventDefault(),a())};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[a]);const r=c=>{c.target===o.current&&a()};return t.jsx("div",{ref:o,className:Y.adminOverlay,onClick:r,role:"dialog","aria-modal":"true","aria-labelledby":"admin-title",children:t.jsxs("div",{className:Y.adminPanel,children:[t.jsxs("div",{className:Y.adminHeader,children:[t.jsxs("div",{className:Y.adminHeaderLeft,children:[t.jsx("h1",{id:"admin-title",className:Y.adminTitle,children:"üîß Admin Test Pages"}),t.jsx("p",{className:Y.adminSubtitle,children:"Development tool for testing and documentation"})]}),t.jsx("button",{ref:i,onClick:a,className:Y.closeButton,"aria-label":"Close admin panel",title:"Close (ESC)",children:"‚úï"})]}),t.jsxs("div",{className:Y.warningBanner,children:[t.jsx("span",{className:Y.warningIcon,children:"‚ö†Ô∏è"}),t.jsx("span",{children:"Development Tool - For testing and documentation purposes"})]}),t.jsxs("div",{className:Y.adminTabs,role:"tablist",children:[t.jsx("button",{role:"tab","aria-selected":s==="components","aria-controls":"components-panel",onClick:()=>e("components"),className:U(Y.adminTab,s==="components"&&Y.adminTabActive),children:"üì¶ Components"}),t.jsx("button",{role:"tab","aria-selected":s==="tasks","aria-controls":"tasks-panel",onClick:()=>e("tasks"),className:U(Y.adminTab,s==="tasks"&&Y.adminTabActive),children:"üéØ Task Types"})]}),t.jsxs("div",{className:Y.adminContent,children:[s==="components"&&t.jsx("div",{id:"components-panel",role:"tabpanel","aria-labelledby":"components-tab",className:Y.adminTabPanel,children:t.jsx(vi,{})}),s==="tasks"&&t.jsx("div",{id:"tasks-panel",role:"tabpanel","aria-labelledby":"tasks-tab",className:Y.adminTabPanel,children:t.jsx(fr,{})})]})]})})}const At="mindforge.website.auth",Ke="mindforge.website.attempts",Ir=1e3,Dr=5,Nt=3e5;async function Pr(s){if(!s||s.length===0)throw new Error("Passwort darf nicht leer sein.");if(s.length>Ir)throw new Error("Passwort ist zu lang.");const a=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(i)).map(c=>c.toString(16).padStart(2,"0")).join("")}async function Br(s,e){return await Pr(s)===e.toLowerCase()}class Lr{isAuthenticated(){try{return localStorage.getItem(At)==="authenticated"}catch(e){return console.warn("[WebsiteAuth] Failed to check authentication status",e),!1}}setAuthenticated(){try{localStorage.setItem(At,"authenticated")}catch(e){throw console.error("[WebsiteAuth] Failed to set authentication",e),new Error("Authentifizierung konnte nicht gespeichert werden.")}}clearAuthentication(){try{localStorage.removeItem(At),localStorage.removeItem(Ke)}catch(e){console.warn("[WebsiteAuth] Failed to clear authentication",e)}}async authenticate(e,a){this.checkRateLimit();const i=await Br(e,a);return i?(this.setAuthenticated(),this.clearAttempts()):this.recordFailedAttempt(),i}checkRateLimit(){try{const e=localStorage.getItem(Ke);if(!e)return;const a=JSON.parse(e),o=Date.now()-a.lastAttempt;if(a.count>=Dr&&o<Nt){const r=Math.ceil((Nt-o)/6e4);throw new Error(`Zu viele fehlgeschlagene Versuche. Bitte versuchen Sie es in ${r} Minute(n) erneut.`)}o>=Nt&&localStorage.removeItem(Ke)}catch(e){if(e instanceof Error&&e.message.includes("Zu viele"))throw e;console.warn("[WebsiteAuth] Failed to check rate limit",e)}}recordFailedAttempt(){try{const e=localStorage.getItem(Ke),a=e?JSON.parse(e):{count:0,lastAttempt:0};a.count+=1,a.lastAttempt=Date.now(),localStorage.setItem(Ke,JSON.stringify(a))}catch(e){console.warn("[WebsiteAuth] Failed to record failed attempt",e)}}clearAttempts(){try{localStorage.removeItem(Ke)}catch(e){console.warn("[WebsiteAuth] Failed to clear attempts",e)}}}const Mr=new Lr;typeof window<"u"&&he.load();function $r(){const[s,e]=u.useState(!1),[a,i]=u.useState(""),[o,r]=u.useState(!1),[c,h]=u.useState([]),[n,g]=u.useState(null),[x,L]=u.useState([]),[E,B]=u.useState({}),[_,Q]=u.useState(null),[D,Z]=u.useState(!0),[ne,ie]=u.useState(!1),[X,me]=u.useState(null),[Be,ke]=u.useState(!1),[je,fe]=u.useState(!1),[f,j]=u.useState({targetCount:10,includeReview:!0}),[I,G]=u.useState(!1),[P,ee]=u.useState(!1),[ce,Le]=u.useState("components"),[Xe,Fe]=u.useState("system"),de=u.useRef(!1);u.useEffect(()=>{const b=Mr.isAuthenticated();e(b)},[]),u.useEffect(()=>{de.current||(de.current=!0,tt())},[]),u.useEffect(()=>{const b=C=>{Me(!0).catch(V=>console.error("Reseed event failed",V))},R=C=>{te().catch(V=>console.error("Reset event failed",V))};return window.addEventListener("app:database:reseed",b),window.addEventListener("app:database:reset",R),()=>{window.removeEventListener("app:database:reseed",b),window.removeEventListener("app:database:reset",R)}},[]),u.useEffect(()=>{const b=R=>{const C=R.detail;C?.settings?.theme?.mode&&Fe(C.settings.theme.mode)};return window.addEventListener("app:settings:updated",b),Fe(he.getSettings().theme.mode),()=>{window.removeEventListener("app:settings:updated",b)}},[]),u.useEffect(()=>{const b=R=>{(R.ctrlKey||R.metaKey)&&R.shiftKey&&R.key.toLowerCase()==="a"&&(R.preventDefault(),ee(C=>!C))};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[]),u.useEffect(()=>{const b=()=>{const R=window.location.hash;R.startsWith("#admin")&&(ee(!0),Le(R==="#admin/tasks"?"tasks":"components"))};return b(),window.addEventListener("hashchange",b),()=>window.removeEventListener("hashchange",b)},[]);const et=()=>{const b=["system","light","dark"],R=b.indexOf(Xe),C=b[(R+1)%b.length]??"system",V=he.update(q=>({...q,theme:{...q.theme,mode:C}}));Fe(V.theme.mode)},Se=Xe==="system"?"System":Xe==="light"?"Hell":"Dunkel";async function tt(){try{const b=document.querySelector('meta[name="deployment-version"]')?.getAttribute("content"),R=document.querySelector('meta[name="deployment-version"]')?.getAttribute("data-build-time");console.log("üöÄ Deployment Version:",b,"Build Time:",R);const C="2",V=localStorage.getItem("dbVersion"),q=await F.topics.count(),Ce=await F.tasks.count();console.log(`Database status: ${q} topics, ${Ce} tasks, version: ${V}`),q===0||Ce===0||V!==C?(console.log(V!==C?`Database version mismatch (${V} -> ${C}), re-seeding...`:"Database empty or incomplete, seeding..."),await Bt(F),localStorage.setItem("dbVersion",C)):console.log("Database already seeded, skipping seed");const dt=await F.topics.toArray();h(dt),Z(!1)}catch(b){console.error("Failed to initialize app:",b),console.error("Error details:",{name:b?.name,message:b?.message,failures:b?.failures,stack:b?.stack}),Z(!1)}}async function ue(b){g(b);const R=await F.learningPaths.where("topicId").equals(b.id).toArray();console.log(`Loading learning paths for topic ${b.id}:`,R),R.sort((V,q)=>new Date(q.createdAt).getTime()-new Date(V.createdAt).getTime());const C={};for(const V of R){const q=await F.tasks.where("learningPathId").equals(V.id).toArray();C[V.id]=q.length,console.log(`Learning path "${V.title}" (${V.id}): ${q.length} tasks in DB, taskIds array length: ${V.taskIds?.length||0}`),console.log("Task IDs:",q.map(Ce=>Ce.id))}B(C),L(R)}function st(b){Q(b),fe(!0)}function ge(){fe(!1),ie(!0)}function at(){fe(!1),Q(null)}async function Ae(){if(ie(!1),_&&n){const b=await F.practiceSessions.where("execution.status").equals("completed").reverse().limit(1).toArray();b.length>0&&b[0]&&me(b[0])}}function Ne(){ie(!1),Q(null)}function pe(){me(null)}function lt(){me(null),_&&ie(!0)}if(D)return t.jsxs("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif",textAlign:"center"},children:[t.jsx("h1",{children:"üß† MindForge Academy"}),t.jsx("p",{children:"Wird geladen..."})]});if(Be)return t.jsx("div",{style:{fontFamily:"system-ui, sans-serif"},children:t.jsx(ba,{onClose:()=>ke(!1)})});if(I)return t.jsx("div",{style:{fontFamily:"system-ui, sans-serif"},children:t.jsx(xn,{onClose:()=>G(!1)})});if(P)return t.jsx("div",{style:{fontFamily:"system-ui, sans-serif"},children:t.jsx(Rr,{activeTab:ce,onTabChange:Le,onClose:()=>{ee(!1),window.location.hash=""}})});if(X)return t.jsx("div",{style:{fontFamily:"system-ui, sans-serif"},children:t.jsx(ua,{session:X,onClose:pe,onStartNew:lt})});if(je&&_&&n)return t.jsxs("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif",maxWidth:"600px",margin:"0 auto"},children:[t.jsx("button",{onClick:at,style:{padding:"0.5rem 1rem",background:"var(--color-bg-tertiary)",color:"var(--color-text-primary)",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"1rem"},children:"‚Üê Zur√ºck"}),t.jsx("h1",{style:{marginBottom:"0.5rem"},children:"Sitzung konfigurieren"}),t.jsx("p",{style:{color:"var(--color-text-secondary)",marginBottom:"2rem"},children:_.title}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsx("label",{style:{display:"block",fontWeight:"500",marginBottom:"0.5rem"},children:"Anzahl der Fragen"}),t.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[5,10,15,20].map(b=>t.jsx("button",{onClick:()=>j({...f,targetCount:b}),style:{padding:"0.75rem 1.5rem",background:f.targetCount===b?"var(--color-primary)":"var(--color-bg-secondary)",color:f.targetCount===b?"var(--color-text-inverse)":"var(--color-text-primary)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:b},b))})]}),t.jsxs("div",{style:{marginBottom:"2rem"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:f.includeReview,onChange:b=>j({...f,includeReview:b.target.checked}),style:{marginRight:"0.5rem",width:"1.25rem",height:"1.25rem",cursor:"pointer"}}),t.jsx("span",{children:"Wiederholungsfragen einbeziehen"})]}),t.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-text-secondary)",marginTop:"0.5rem",marginLeft:"1.75rem"},children:"Fragen, die du bereits beantwortet hast und die zur Wiederholung f√§llig sind"})]}),t.jsx("button",{onClick:ge,style:{padding:"1rem 2rem",background:"var(--color-primary)",color:"var(--color-text-inverse)",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1.1rem",fontWeight:"500",width:"100%"},children:"Sitzung starten ‚Üí"})]});if(ne&&_&&n)return t.jsx("div",{style:{fontFamily:"system-ui, sans-serif"},children:t.jsx(ia,{topicId:n.id,learningPathIds:[_.id],targetCount:f.targetCount,includeReview:f.includeReview,onComplete:Ae,onCancel:Ne})});if(n)return t.jsxs("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif"},children:[t.jsx("button",{onClick:()=>g(null),style:{padding:"0.5rem 1rem",background:"var(--color-bg-tertiary)",color:"var(--color-text-primary)",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"1rem"},children:"‚Üê Zur√ºck zu Themen"}),t.jsxs("h1",{children:["üìö ",n.title]}),t.jsx("h2",{style:{marginTop:"2rem",marginBottom:"1rem"},children:"Lernpfade"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:x.map(b=>t.jsxs("div",{style:{padding:"1.5rem",background:"var(--color-bg-primary)",border:"2px solid var(--color-bg-tertiary)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:R=>{R.currentTarget.style.borderColor="var(--color-primary)",R.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:R=>{R.currentTarget.style.borderColor="var(--color-bg-tertiary)",R.currentTarget.style.transform="translateY(0)"},children:[t.jsx("h3",{style:{marginBottom:"0.5rem"},children:b.title}),t.jsx("p",{style:{fontSize:"0.9rem",color:"var(--color-text-secondary)",marginBottom:"1rem"},children:b.description}),t.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--color-text-secondary)"},children:[t.jsx("span",{style:{marginRight:"1rem"},children:b.difficulty==="easy"?"üü¢ Leicht":b.difficulty==="medium"?"üü° Mittel":"üî¥ Schwer"}),t.jsxs("span",{children:[E[b.id]||b.taskIds?.length||0," Aufgaben"]})]}),t.jsx("button",{onClick:()=>st(b),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"var(--color-primary)",color:"var(--color-text-inverse)",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%"},children:"Lernpfad starten ‚Üí"})]},b.id))})]});async function Me(b=!0){try{await F.topics.clear(),await F.learningPaths.clear(),await F.tasks.clear(),await Bt(F);const R=await F.topics.toArray();h(R);let C;if(navigator.storage?.estimate)try{C=(await navigator.storage.estimate()).usage??void 0}catch(q){console.warn("Storage estimate failed",q)}const V={lastUpdatedAt:new Date().toISOString(),storageUsageBytes:C};window.dispatchEvent(new CustomEvent("app:database:updated",{detail:V})),b&&alert("‚úÖ Datenbank erfolgreich aktualisiert!")}catch(R){console.error("Reseed failed:",R),b&&alert("‚ùå Fehler beim Aktualisieren der Datenbank")}}async function te(){try{await F.delete(),localStorage.removeItem("dbVersion"),localStorage.removeItem("mindforge.app-settings.v1"),localStorage.removeItem("audioSettings"),window.location.reload()}catch(b){console.error("Reset failed:",b),alert("‚ùå Fehler beim L√∂schen der Daten")}}function Ue(b){const R=b.id==="test"?"üéØ":b.id==="mathematik"?"üî¢":b.id==="spanisch"?"üá™üá∏":b.id==="englisch"?"üá¨üáß":"üß¨",C=b.id==="test"?"#fef3c7":b.id==="mathematik"?"#dbeafe":b.id==="spanisch"?"#fef3c7":"#dcfce7";return{id:b.id,name:b.title,description:`${b.learningPathIds.length} Lernpfade`,icon:R,color:C}}const $e=document.querySelector('meta[name="deployment-version"]')?.getAttribute("content")||"unknown";return t.jsxs("div",{style:{padding:"2rem",fontFamily:"system-ui, sans-serif"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[t.jsxs("div",{children:[t.jsx("h1",{children:"üß† MindForge Academy"}),t.jsx("p",{style:{fontSize:"1.1rem",color:"var(--color-text-secondary)",marginTop:"0.5rem"},children:"Erweitere dein Wissen, eine Frage nach der anderen"}),t.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--color-text-tertiary, #999)",marginTop:"0.25rem"},children:["v",$e]})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[t.jsxs("button",{onClick:et,title:`Theme wechseln (aktuell: ${Se})`,style:{padding:"0.75rem 1.5rem",background:"var(--color-primary, #667eea)",color:"#ffffff",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:["üåì ",Se]}),t.jsx("button",{onClick:()=>ke(!0),style:{padding:"0.75rem 1.5rem",background:"var(--color-primary)",color:"var(--color-text-inverse)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:"üìä Dashboard"}),t.jsx("button",{onClick:()=>G(!0),style:{padding:"0.75rem 1.5rem",background:"var(--color-info)",color:"var(--color-text-inverse)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:"‚öôÔ∏è Einstellungen"}),t.jsx("button",{onClick:()=>ee(!0),style:{padding:"0.75rem 1.5rem",background:"var(--color-secondary)",color:"var(--color-text-inverse)",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},title:"Keyboard shortcut: Ctrl+Shift+A",children:"üîß Admin"})]})]}),t.jsx("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Themen ausw√§hlen"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1.5rem"},children:c.map(b=>t.jsx(Qt,{topic:Ue(b),onSelect:R=>{const C=c.find(V=>V.id===R);C&&ue(C)},"data-testid":`topic-card-${b.id}`},b.id))})]})}Ct.createRoot(document.getElementById("root")).render(t.jsx(ae.StrictMode,{children:t.jsx($r,{})}));
//# sourceMappingURL=index-CpP1gHxR.js.map
